<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ“–&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Promise&nbsp;|&nbsp;Notablog</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Promise">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ“–&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ˜€&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">Promise</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sat, Apr 9, 2022</span>
        
        
      </div>
    
  </header>
  <article id="https://www.notion.so/88f82d86690046dd97673802eb60f551" class="PageRoot PageRoot--FullWidth"><div id="https://www.notion.so/061025ff13f94ee2a726cf1ff217e48c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul id="https://www.notion.so/d07e9fd6f1574d57ab1a3342640f95a1" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/a9f7404332714a3aa910783a13d7b873"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">ä¸€ã€Promiseçš„ç†è§£ä¸ä½¿ç”¨</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/44e9501f0b8c4980aca36fa8b639c0ff"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">1ã€Promiseæ˜¯ä»€ä¹ˆ?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/568283d327c342b18628c027819e4393"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â… -ç†è§£</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ccb6c38a5983450b8b9703a392f03a12"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¡-promise çš„çŠ¶æ€</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f7feb55ad8a746cb9ab29b3b7925c178"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">a) promise çš„çŠ¶æ€</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/51b8411b002140b7bc685699814ff73b"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">b) promise çš„çŠ¶æ€æ”¹å˜</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c9b5479b0d3845209fea3bff256c8374"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¢-promiseçš„åŸºæœ¬æµç¨‹</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/74d4230f79cf43fbaad369c9d5058a32"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…£-promiseçš„åŸºæœ¬ä½¿ç”¨</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/31f2e0a8887145aeaf841d00e8a4b681"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">1.ä½¿ç”¨ promise å°è£…åŸºäºå®šæ—¶å™¨çš„å¼‚æ­¥</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a3146fd934f04053a9eff55de0b77f43"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">2.ä½¿ç”¨ promise å°è£… ajax å¼‚æ­¥è¯·æ±‚</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/60b5820830494a27bd0bf8eefe753fa7"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">3.fsæ¨¡å—ä½¿ç”¨Promise</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2c47bf679a18479e88d28d2368889fd5"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">4.å¼‚å¸¸ç©¿é€</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/55f96db4e65a4c8795eab9986277685d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">5.</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">util.promisifyæ–¹æ³•</code></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c43c7d392ca64c52a54c1966cbc3fb55"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">2ã€ä¸ºä»€ä¹ˆè¦ç”¨Promise?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/cb80e09952404dd7bc00f0a5c6049dab"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â… -æŒ‡å®šå›è°ƒå‡½æ•°çš„æ–¹å¼æ›´åŠ çµæ´»</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d03ea2f7d2a34ae69ffc7af7686a0f98"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¡-æ”¯æŒé“¾å¼è°ƒç”¨, å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3000a70e3c0d4e428f941757a0df667d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">1ã€ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7007969228b4494994be64f717fbb3e1"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">2ã€å›è°ƒåœ°ç‹±çš„ç¼ºç‚¹?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6423431449824515b28b2c96d0650771"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">3ã€è§£å†³æ–¹æ¡ˆ?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8b3b49ec0af7477dacb8ab8d218ea3e2"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">4ã€ç»ˆæè§£å†³æ–¹æ¡ˆ?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/15bc13e804574835b0440ce1d9479717"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">3ã€Promiseä¸­çš„å¸¸ç”¨API</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/696838888fa3486ab0c6b0ff6e9b5cea"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â… - Promise æ„é€ å‡½æ•°: Promise (excutor) {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/903c5ea616a342ebaf1d8ef4eea25559"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¡-Promise.prototype.then æ–¹æ³•: (onResolved, onRejected) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6b4979af19794cb3a87563bd2725194a"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¢-Promise.prototype.catch æ–¹æ³•: (onRejected) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f9bc8fbfd3f341d5afd7095868d82ab4"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…£-Promise.resolve æ–¹æ³•: (value) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/536dc44360cb46f68b16672ca291dfb1"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¤-Promise.reject æ–¹æ³•: (reason) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e93f5631f8ec48f2b23d47d27723d1f6"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¥-Promise.all æ–¹æ³•: (promises) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9ba9fa91369b432e8eef9bc06e7a1a15"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¦-Promise.race æ–¹æ³•: (promises) =&gt; {}</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9213dc22d6a14ff49d60ffebc78d0663"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">4ã€Promiseçš„å‡ ä¸ªå…³é”®é—®é¢˜</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/bf944bcf445647619440db35f0b1a098"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â… -å¦‚ä½•æ”¹å˜ promise çš„çŠ¶æ€?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e6c90d1199744cc0ae92600b9f70f014"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¡-ä¸€ä¸ª promise æŒ‡å®šå¤šä¸ªæˆåŠŸ/å¤±è´¥å›è°ƒå‡½æ•°, éƒ½ä¼šè°ƒç”¨å—?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/aa907467ee9d4ea3b987750dab7c4df5"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¢- æ”¹å˜ promise çŠ¶æ€å’ŒæŒ‡å®šå›è°ƒå‡½æ•°è°å…ˆè°å?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b7236196d4e7412d84e18eb229b19e24"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…£-promise.then()è¿”å›çš„æ–° promise çš„ç»“æœçŠ¶æ€ç”±ä»€ä¹ˆå†³å®š?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6cd786c7feec4156a8ac969546aa0f87"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¤- promise å¦‚ä½•ä¸²è¿å¤šä¸ªæ“ä½œä»»åŠ¡?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/dbe6b965d3e643e8b0ce0c2b45d14b1c"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¥-promise å¼‚å¸¸ä¼ é€?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/fd6a98a9a10d4b9ebcd740ccdec32cd8"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¦- ä¸­æ–­ promise é“¾?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/27e5ba442e8a4995b607f573cf09a711"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">äºŒã€è‡ªå®šä¹‰Promiseæ‰‹å†™</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6fbf8829ad8c427397580211d458dbc4"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â… -Promiseçš„å®ä¾‹æ–¹æ³•å®ç°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/075b270387b346c68b02695be8f703b4"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">1 - åˆå§‹ç»“æ„æ­å»º</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/db20172355ab4004a0219570101c3eb2"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">2 - resolve ä¸ rejectæ„å»ºä¸åŸºç¡€å®ç°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/51ca346970d54a668746c457326a2f3d"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">3 - throw æŠ›å‡ºå¼‚å¸¸æ”¹å˜çŠ¶æ€</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/203e5e30a03f4e73a7c8030147576443"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">4 - çŠ¶æ€åªèƒ½ä¿®æ”¹ä¸€æ¬¡</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ee924a2028f34c26beea81d76096d3b5"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">5 - then æ–¹æ³•æ‰§è¡Œå›è°ƒåŸºç¡€å®ç°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/565d151509274bc7ab7e06a1d14a3d8a"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">6 - å¼‚æ­¥ä»»åŠ¡ then æ–¹æ³•å®ç°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/adbd77a8d5f04f12bdad0f6db20e8580"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">7 - æŒ‡å®šå¤šä¸ªå›è°ƒ</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d99f72343b644163b369b8c7d4cefc3a"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">8 - åŒæ­¥ä»»åŠ¡ then è¿”å›ç»“æœ</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/00ef0df96c344df391f5553f0577bab9"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">9 - å¼‚æ­¥ä»»åŠ¡ then è¿”å›ç»“æœ</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e9ce62289b674088aa66563c408e7982"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">10- thenæ–¹æ³•ä»£ç ä¼˜åŒ–</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/69d778073dab44b9a52fdece5af0b433"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">11 - catch æ–¹æ³•ä¸å¼‚å¸¸ç©¿é€ä¸å€¼ä¼ é€’</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e4059e69d3bf46faaa3b0a0cbfb2ed49"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¡-Promiseçš„é™æ€æ–¹æ³•å®ç°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/279e6358b52643e39291c8be2fac9aad"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">1 - Promise.resolve å°è£…</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/899fe79401084020b3eeeabe225ae9e1"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">2 - Promise.resolve å°è£…</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/5167f14778c04c1daf0baf2b54780824"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">3 - Promise.all å°è£…</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3a4b02b8ae8245c39a1dcf8907fa1d09"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">4 - Promise.race å°è£…</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6cbb5e521974491b9a00cd5f4158b88d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">â…¢-å…¶ä»–ä¼˜åŒ–</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/60605b2d71524106bdb71c4f175b1a90"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">1 - å›è°ƒå‡½æ•°ã€å¼‚æ­¥æ‰§è¡Œã€</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/61e0ec8a2aa946a2b7ef6983997ae88d"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">2- classæ”¹å†™promise</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/90dd4fabb5f7471f9e33f2b7bc3e0624"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">ä¸‰ã€generator + async + await</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/548c286178d2489b977520939927ac80"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">generator</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/af3b66e9fae748d2ab81723ce30a9cc6"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">async+await</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/29b0d08ec70d45799a766df09b0b029a"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">ç”¨generator/nextå®ç°async/awaitï¼š</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/be68efb5a1b24044ac4c083af776ed0c"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">async/awaitçš„æ‰§è¡Œé¡ºåº</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3b562e0c8f3b42879230823d77655bd9"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">async/awaité¢è¯•é¢˜</span></span></div></a></li></ul><div id="https://www.notion.so/6d9687879dbe486c941ef210d04ffc4d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/98fc8b662b8b4aa29574689191633c41" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/a9f7404332714a3aa910783a13d7b873" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/a9f7404332714a3aa910783a13d7b873"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ä¸€ã€Promiseçš„ç†è§£ä¸ä½¿ç”¨</span></span></h1><blockquote id="https://www.notion.so/09ea99c24834426ba2e877a01ade1da0" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">1ã€æ¦‚å¿µ: Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚é€šä¿—è®²ï¼ŒPromiseæ˜¯ä¸€ä¸ªè®¸è¯ºã€æ‰¿è¯º,æ˜¯å¯¹æœªæ¥äº‹æƒ…çš„æ‰¿è¯ºï¼Œæ‰¿è¯ºä¸ä¸€å®šèƒ½å®Œæˆï¼Œä½†æ˜¯æ— è®ºæ˜¯å¦èƒ½å®Œæˆéƒ½ä¼šæœ‰ä¸€ä¸ªç»“æœã€‚ 
Pending æ­£åœ¨åšã€‚ã€‚ã€‚ 
Resolved å®Œæˆè¿™ä¸ªæ‰¿è¯º 
Rejected è¿™ä¸ªæ‰¿è¯ºæ²¡æœ‰å®Œæˆï¼Œå¤±è´¥äº† 
Promise ç”¨æ¥é¢„å®šä¸€ä¸ªä¸ä¸€å®šèƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ åœ¨å…·ä½“çš„ç¨‹åºä¸­å…·ä½“çš„ä½“ç°ï¼Œé€šå¸¸ç”¨æ¥å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæä¾›æ‰¿è¯ºç»“æœPromise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦ç”¨æ¥è§£å†³</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange">å›è°ƒåœ°ç‹±</mark></span><span class="SemanticString">çš„é—®é¢˜ï¼Œå¯ä»¥æœ‰æ•ˆçš„å‡å°‘å›è°ƒåµŒå¥—ã€‚çœŸæ­£è§£å†³éœ€è¦é…åˆasync/await

2ã€ç‰¹ç‚¹: (1)å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼šPendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Resolvedï¼ˆå·²å®Œæˆï¼Œåˆç§°Fulfilledï¼‰å’ŒRejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚ (2)ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»Pendingå˜ä¸ºResolvedå’Œä»Pendingå˜ä¸ºRejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹Promiseå¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚3ã€ç¼ºç‚¹: (1)æ— æ³•å–æ¶ˆPromiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å’Œä¸€èˆ¬çš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œæ— éœ€è°ƒç”¨ã€‚ (2)å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ (3)å½“å¤„äºPendingçŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰</span></span></blockquote><div id="https://www.notion.so/34994c22a479471fa47bb290299b044a" class="Divider"></div><h2 id="https://www.notion.so/44e9501f0b8c4980aca36fa8b639c0ff" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/44e9501f0b8c4980aca36fa8b639c0ff"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1ã€Promiseæ˜¯ä»€ä¹ˆ?</span></span></h2><h3 id="https://www.notion.so/568283d327c342b18628c027819e4393" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/568283d327c342b18628c027819e4393"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â… -ç†è§£</span></span></h3><blockquote id="https://www.notion.so/e47d51220aac4ceea4c4f5aa23aa6e51" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">æŠ½è±¡è¡¨è¾¾: 1) Promise æ˜¯ä¸€é—¨æ–°çš„æŠ€æœ¯(ES6 è§„èŒƒ) 2)Promise æ˜¯ JS ä¸­è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ–°è§£å†³æ–¹æ¡ˆ å¤‡æ³¨ï¼šæ—§æ–¹æ¡ˆæ˜¯å•çº¯ä½¿ç”¨å›è°ƒå‡½æ•°å…·ä½“è¡¨è¾¾:ä»è¯­æ³•ä¸Šæ¥è¯´: Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ä»åŠŸèƒ½ä¸Šæ¥è¯´: promise å¯¹è±¡ç”¨æ¥å°è£…ä¸€ä¸ªå¼‚æ­¥æ“ä½œå¹¶å¯ä»¥è·å–å…¶æˆåŠŸ/ å¤±è´¥çš„ç»“æœå€¼</span></span></blockquote><h3 id="https://www.notion.so/ccb6c38a5983450b8b9703a392f03a12" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ccb6c38a5983450b8b9703a392f03a12"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¡-promise çš„çŠ¶æ€</span></span></h3><h3 id="https://www.notion.so/f7feb55ad8a746cb9ab29b3b7925c178" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f7feb55ad8a746cb9ab29b3b7925c178"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">a) promise çš„çŠ¶æ€</span></span></h3><blockquote id="https://www.notion.so/de0a81af34ec4f6cb75e962f8934c4de" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å®ä¾‹å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ ã€PromiseStateã€
pending æœªå†³å®šçš„
resolved / fullfilled æˆåŠŸ
rejected å¤±è´¥</span></span></blockquote><h3 id="https://www.notion.so/51b8411b002140b7bc685699814ff73b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/51b8411b002140b7bc685699814ff73b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">b) promise çš„çŠ¶æ€æ”¹å˜</span></span></h3><blockquote id="https://www.notion.so/bca33535d6774f64b0bcf312f71ece3d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">pending å˜ä¸º resolved
pending å˜ä¸º rejected
</span></span></blockquote><div id="https://www.notion.so/aceee0f86ce34de1bedb5ca5b3968d0c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">è¯´æ˜: åªæœ‰è¿™ 2 ç§, ä¸”ä¸€ä¸ª promise å¯¹è±¡åªèƒ½æ”¹å˜ä¸€æ¬¡ æ— è®ºå˜ä¸ºæˆåŠŸè¿˜æ˜¯å¤±è´¥, éƒ½ä¼šæœ‰ä¸€ä¸ªç»“æœæ•°æ® æˆåŠŸçš„ç»“æœæ•°æ®ä¸€èˆ¬ç§°ä¸º value, å¤±è´¥çš„ç»“æœæ•°æ®ä¸€èˆ¬ç§°ä¸º reason</span></span></p></div><h3 id="https://www.notion.so/c9b5479b0d3845209fea3bff256c8374" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c9b5479b0d3845209fea3bff256c8374"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¢-promiseçš„åŸºæœ¬æµç¨‹</span></span></h3><div id="https://www.notion.so/da8878f84fed4e93bdf52f8f52a86162" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe2cf08df-8a1b-4b6c-bcb5-41b73beaa90c%2FUntitled.png?width=1154&amp;table=block&amp;id=da8878f8-4fed-4e93-bdf5-2f8f52a86162"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe2cf08df-8a1b-4b6c-bcb5-41b73beaa90c%2FUntitled.png?width=1154&amp;table=block&amp;id=da8878f8-4fed-4e93-bdf5-2f8f52a86162" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/74d4230f79cf43fbaad369c9d5058a32" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/74d4230f79cf43fbaad369c9d5058a32"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…£-promiseçš„åŸºæœ¬ä½¿ç”¨</span></span></h3><h3 id="https://www.notion.so/31f2e0a8887145aeaf841d00e8a4b681" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/31f2e0a8887145aeaf841d00e8a4b681"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1.ä½¿ç”¨ promise å°è£…åŸºäºå®šæ—¶å™¨çš„å¼‚æ­¥</span></span></h3><pre id="https://www.notion.so/df51a71d5b6e4cc0b428704269149757" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token operator">&lt;</span>script <span class="token operator">></span>
  <span class="token keyword">function</span> <span class="token function">doDelay</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. åˆ›å»º promise å¯¹è±¡(pending çŠ¶æ€), æŒ‡å®šæ‰§è¡Œå™¨å‡½æ•°</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// 2. åœ¨æ‰§è¡Œå™¨å‡½æ•°ä¸­å¯åŠ¨å¼‚æ­¥ä»»åŠ¡</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¯åŠ¨å¼‚æ­¥ä»»åŠ¡'</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å»¶è¿Ÿä»»åŠ¡å¼€å§‹æ‰§è¡Œ...'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å‡è®¾: æ—¶é—´ä¸ºå¥‡æ•°ä»£è¡¨æˆåŠŸ, ä¸ºå¶æ•°ä»£è¡¨å¤±è´¥</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æˆåŠŸäº†</span>
          <span class="token comment">// 3. 1. å¦‚æœæˆåŠŸäº†, è°ƒç”¨ resolve()å¹¶ä¼ å…¥æˆåŠŸçš„ value</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'æˆåŠŸçš„æ•°æ® '</span> <span class="token operator">+</span> time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// å¤±è´¥äº†</span>
          <span class="token comment">// 3.2. å¦‚æœå¤±è´¥äº†, è°ƒç”¨ reject()å¹¶ä¼ å…¥å¤±è´¥çš„ reason</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'å¤±è´¥çš„æ•°æ® '</span> <span class="token operator">+</span> time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">doDelay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">// promise æŒ‡å®šæˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒå‡½æ•°æ¥è·å–æˆåŠŸçš„ vlaue æˆ–å¤±è´¥çš„ reason</span>
    <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token comment">// æˆåŠŸçš„å›è°ƒå‡½æ•° onResolved, å¾—åˆ°æˆåŠŸçš„ vlaue</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆåŠŸçš„ value: '</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// å¤±è´¥çš„å›è°ƒå‡½æ•° onRejected, å¾—åˆ°å¤±è´¥çš„ reason</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¤±è´¥çš„ reason: '</span><span class="token punctuation">,</span> reason<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token operator">&lt;</span>
  <span class="token operator">/</span>script<span class="token operator">></span></span></span></span></code></pre><h3 id="https://www.notion.so/a3146fd934f04053a9eff55de0b77f43" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a3146fd934f04053a9eff55de0b77f43"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2.ä½¿ç”¨ promise å°è£… ajax å¼‚æ­¥è¯·æ±‚</span></span></h3><pre id="https://www.notion.so/83fea369d7ad4a85af09a141775b9fb7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token operator">&lt;</span>script <span class="token operator">></span>
  <span class="token comment">/*
  å¯å¤ç”¨çš„å‘ ajax è¯·æ±‚çš„å‡½æ•°: xhr + promise
  */</span>
  <span class="token keyword">function</span> <span class="token function">promiseAjax</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>
          status<span class="token punctuation">,</span>
          response
        <span class="token punctuation">}</span> <span class="token operator">=</span> xhr
        <span class="token comment">// è¯·æ±‚æˆåŠŸ, è°ƒç”¨ resolve(value)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// è¯·æ±‚å¤±è´¥, è°ƒç”¨ reject(reason)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'è¯·æ±‚å¤±è´¥: status: '</span> <span class="token operator">+</span> status<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token function">promiseAjax</span><span class="token punctuation">(</span>'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>apiopen<span class="token punctuation">.</span>top2<span class="token operator">/</span>getJoke<span class="token operator">?</span>page<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>count<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>type<span class="token operator">=</span>vid
    eo '<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
      <span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ˜¾ç¤ºæˆåŠŸæ•°æ®'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></span></span></span></code></pre><h3 id="https://www.notion.so/60b5820830494a27bd0bf8eefe753fa7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/60b5820830494a27bd0bf8eefe753fa7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3.fsæ¨¡å—ä½¿ç”¨Promise</span></span></h3><pre id="https://www.notion.so/006db99d14d14fafb242aa7a96ab2415" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å›è°ƒå‡½æ•° å½¢å¼----------------------------------------------------</span>
 fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./resource/content.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     <span class="token comment">// å¦‚æœå‡ºé”™ åˆ™æŠ›å‡ºé”™è¯¯</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
     <span class="token comment">//è¾“å‡ºæ–‡ä»¶å†…å®¹</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Promise å½¢å¼-----------------------------------------------------------</span>
<span class="token comment">/**
 * å°è£…ä¸€ä¸ªå‡½æ•° mineReadFile è¯»å–æ–‡ä»¶å†…å®¹
 * å‚æ•°:  path  æ–‡ä»¶è·¯å¾„
 * è¿”å›:  promise å¯¹è±¡
 */</span>
<span class="token keyword">function</span> <span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">//è¯»å–æ–‡ä»¶</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span><span class="token punctuation">{</span>
            <span class="token comment">//åˆ¤æ–­</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æˆåŠŸ</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token string">'./resource/content.txt'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token operator">=></span><span class="token punctuation">{</span>
    <span class="token comment">//è¾“å‡ºæ–‡ä»¶å†…å®¹</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span><span class="token operator">=></span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/2c47bf679a18479e88d28d2368889fd5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2c47bf679a18479e88d28d2368889fd5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4.å¼‚å¸¸ç©¿é€</span></span></h3><blockquote id="https://www.notion.so/28af05760bfd4d3f81083d5d6d86d0de" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å¯ä»¥åœ¨æ¯ä¸ªthen()çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ä¸­è¿›è¡Œerrå¤„ç†,ä¹Ÿå¯ä»¥åˆ©ç”¨å¼‚å¸¸ç©¿é€ç‰¹æ€§,åˆ°æœ€åç”¨catchå»æ‰¿æ¥ç»Ÿä¸€å¤„ç†,ä¸¤è€…ä¸€èµ·ç”¨æ—¶,å‰è€…ä¼šç”Ÿæ•ˆ(å› ä¸ºerrå·²ç»å°†å…¶å¤„ç†,å°±ä¸ä¼šå†å¾€ä¸‹ç©¿é€)è€Œèµ°ä¸åˆ°åé¢çš„catchåœ¨æ¯ä¸ª.then()ä¸­æˆ‘å¯ä»¥å°†æ•°æ®å†æ¬¡ä¼ å‡ºç»™ä¸‹ä¸€ä¸ªthen()</span></span></blockquote><pre id="https://www.notion.so/4341ed4521594ae1895ff90839312772" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token string">'./11.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token operator">=></span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">"2222222"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿™æ˜¯catchçš„"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span></span></code></pre><h3 id="https://www.notion.so/55f96db4e65a4c8795eab9986277685d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/55f96db4e65a4c8795eab9986277685d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5.</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">util.promisifyæ–¹æ³•</code></span></span></h3><blockquote id="https://www.notion.so/a9f1f84f46674ed3a3f4a90dacdf9c29" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å¯ä»¥å°†å‡½æ•°ç›´æ¥å˜æˆpromiseçš„å°è£…æ–¹å¼,ä¸ç”¨å†å»æ‰‹åŠ¨å°è£…</span></span></blockquote><pre id="https://www.notion.so/72c31147969f47e58d166e42a906e176" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">//å¼•å…¥ util æ¨¡å—</span>
<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å¼•å…¥ fs æ¨¡å—</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</span>
<span class="token keyword">let</span> mineReadFile <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token string">'./resource/content.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/9a42025cb40b40e6a0014a3a1d58da35" class="Divider"></div><h2 id="https://www.notion.so/c43c7d392ca64c52a54c1966cbc3fb55" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c43c7d392ca64c52a54c1966cbc3fb55"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2ã€ä¸ºä»€ä¹ˆè¦ç”¨Promise?</span></span></h2><h3 id="https://www.notion.so/cb80e09952404dd7bc00f0a5c6049dab" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cb80e09952404dd7bc00f0a5c6049dab"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â… -æŒ‡å®šå›è°ƒå‡½æ•°çš„æ–¹å¼æ›´åŠ çµæ´»</span></span></h3><blockquote id="https://www.notion.so/48d575dd4bb24086a697bc18d5a8e38f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">æ—§çš„: å¿…é¡»åœ¨å¯åŠ¨å¼‚æ­¥ä»»åŠ¡å‰æŒ‡å®špromise: å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ =&gt; è¿”å›promieå¯¹è±¡ =&gt; ç»™promiseå¯¹è±¡ç»‘å®šå›è°ƒå‡½ æ•°(ç”šè‡³å¯ä»¥åœ¨å¼‚æ­¥ä»»åŠ¡ç»“æŸåæŒ‡å®š/å¤šä¸ª)</span></span></blockquote><h3 id="https://www.notion.so/d03ea2f7d2a34ae69ffc7af7686a0f98" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d03ea2f7d2a34ae69ffc7af7686a0f98"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¡-æ”¯æŒé“¾å¼è°ƒç”¨, å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</span></span></h3><h3 id="https://www.notion.so/3000a70e3c0d4e428f941757a0df667d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3000a70e3c0d4e428f941757a0df667d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1ã€ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±</span></span></h3><blockquote id="https://www.notion.so/b6ea609d4b2a4e0ca1f8ba96fec98cef" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å›è°ƒå‡½æ•°åµŒå¥—è°ƒç”¨, å¤–éƒ¨å›è°ƒå‡½æ•°å¼‚æ­¥æ‰§è¡Œçš„ç»“æœæ˜¯åµŒå¥—çš„å›è°ƒæ‰§è¡Œçš„æ¡ä»¶</span></span></blockquote><div id="https://www.notion.so/8b103e982cd7461f981002d123168f44" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F414e722f-d3bd-4f45-ad93-9ba148a84468%2FUntitled.png?width=995&amp;table=block&amp;id=8b103e98-2cd7-461f-9810-02d123168f44"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F414e722f-d3bd-4f45-ad93-9ba148a84468%2FUntitled.png?width=995&amp;table=block&amp;id=8b103e98-2cd7-461f-9810-02d123168f44" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/7007969228b4494994be64f717fbb3e1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7007969228b4494994be64f717fbb3e1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2ã€å›è°ƒåœ°ç‹±çš„ç¼ºç‚¹?</span></span></h3><blockquote id="https://www.notion.so/d41d40e2fb41404983b730df91abae38" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ä¸ä¾¿äºé˜…è¯» ä¸ä¾¿äºå¼‚å¸¸å¤„ç†</span></span></blockquote><h3 id="https://www.notion.so/6423431449824515b28b2c96d0650771" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6423431449824515b28b2c96d0650771"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3ã€è§£å†³æ–¹æ¡ˆ?</span></span></h3><blockquote id="https://www.notion.so/7eec18faf78644fba545b2bc8fd75a27" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">promise é“¾å¼è°ƒç”¨,ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œä½†æ˜¯åªæ˜¯ç®€å•çš„æ”¹å˜æ ¼å¼ï¼Œå¹¶æ²¡æœ‰å½»åº•è§£å†³ä¸Šé¢çš„é—®é¢˜çœŸæ­£è¦è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä¸€å®šè¦åˆ©ç”¨promiseå†åŠ ä¸Šawaitå’Œasyncå…³é”®å­—å®ç°å¼‚æ­¥ä¼ åŒæ­¥</span></span></blockquote><h3 id="https://www.notion.so/8b3b49ec0af7477dacb8ab8d218ea3e2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8b3b49ec0af7477dacb8ab8d218ea3e2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4ã€ç»ˆæè§£å†³æ–¹æ¡ˆ?</span></span></h3><blockquote id="https://www.notion.so/7efecf3391cb49509d4ba0481f34df08" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">promise +async/await</span></span></blockquote><div id="https://www.notion.so/000eeaa7941a435aa0b899251528fa69" class="Divider"></div><h2 id="https://www.notion.so/15bc13e804574835b0440ce1d9479717" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/15bc13e804574835b0440ce1d9479717"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3ã€Promiseä¸­çš„å¸¸ç”¨API</span></span></h2><h3 id="https://www.notion.so/696838888fa3486ab0c6b0ff6e9b5cea" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/696838888fa3486ab0c6b0ff6e9b5cea"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â… - Promise æ„é€ å‡½æ•°: Promise (excutor) {}</span></span></h3><blockquote id="https://www.notion.so/707d4d1748db4173ada5975a9421fbc3" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) executor å‡½æ•°: æ‰§è¡Œå™¨ (resolve, reject) =&gt; {}(2) resolve å‡½æ•°: å†…éƒ¨å®šä¹‰æˆåŠŸæ—¶æˆ‘ä»¬è°ƒç”¨çš„å‡½æ•° value =&gt; {}(3) reject å‡½æ•°: å†…éƒ¨å®šä¹‰å¤±è´¥æ—¶æˆ‘ä»¬è°ƒç”¨çš„å‡½æ•° reason =&gt; {}è¯´æ˜: executor ä¼šåœ¨ Promise å†…éƒ¨ç«‹å³åŒæ­¥è°ƒç”¨,å¼‚æ­¥æ“ä½œåœ¨æ‰§è¡Œå™¨ä¸­æ‰§è¡Œ,æ¢è¯è¯´Promiseæ”¯æŒåŒæ­¥ä¹Ÿæ”¯æŒå¼‚æ­¥æ“ä½œ</span></span></blockquote><h3 id="https://www.notion.so/903c5ea616a342ebaf1d8ef4eea25559" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/903c5ea616a342ebaf1d8ef4eea25559"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¡-Promise.prototype.then æ–¹æ³•: (onResolved, onRejected) =&gt; {}</span></span></h3><blockquote id="https://www.notion.so/0038ed93de9d47938b801d8d6a1e589c" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) onResolved å‡½æ•°: æˆåŠŸçš„å›è°ƒå‡½æ•° (value) =&gt; {}(2) onRejected å‡½æ•°: å¤±è´¥çš„å›è°ƒå‡½æ•° (reason) =&gt; {}è¯´æ˜: æŒ‡å®šç”¨äºå¾—åˆ°æˆåŠŸ value çš„æˆåŠŸå›è°ƒå’Œç”¨äºå¾—åˆ°å¤±è´¥ reason çš„å¤±è´¥å›è°ƒ è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡</span></span></blockquote><h3 id="https://www.notion.so/6b4979af19794cb3a87563bd2725194a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6b4979af19794cb3a87563bd2725194a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¢-Promise.prototype.catch æ–¹æ³•: (onRejected) =&gt; {}</span></span></h3><blockquote id="https://www.notion.so/3fad0bcf04ee4c69b9a76d32543a339d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) onRejected å‡½æ•°: å¤±è´¥çš„å›è°ƒå‡½æ•° (reason) =&gt; {}è¯´æ˜: then()çš„è¯­æ³•ç³–, ç›¸å½“äº: then(undefined, onRejected)(2) å¼‚å¸¸ç©¿é€ä½¿ç”¨:å½“è¿è¡Œåˆ°æœ€å,æ²¡è¢«å¤„ç†çš„æ‰€æœ‰å¼‚å¸¸é”™è¯¯éƒ½ä¼šè¿›å…¥è¿™ä¸ªæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­</span></span></blockquote><h3 id="https://www.notion.so/f9bc8fbfd3f341d5afd7095868d82ab4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f9bc8fbfd3f341d5afd7095868d82ab4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…£-Promise.resolve æ–¹æ³•: (value) =&gt; {}</span></span></h3><blockquote id="https://www.notion.so/631303e488a4466f8c5db0f547a82350" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) value: æˆåŠŸçš„æ•°æ®æˆ– promise å¯¹è±¡è¯´æ˜: è¿”å›ä¸€ä¸ªæˆåŠŸ/å¤±è´¥çš„ promise å¯¹è±¡,ç›´æ¥æ”¹å˜promiseçŠ¶æ€  let p3 = Promise.reject(new Promise((resolve, reject) =&gt; {  resolve(&#x27;OK&#x27;); }));      
  console.log(p3);</span></span></blockquote><h3 id="https://www.notion.so/536dc44360cb46f68b16672ca291dfb1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/536dc44360cb46f68b16672ca291dfb1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¤-Promise.reject æ–¹æ³•: (reason) =&gt; {}</span></span></h3><blockquote id="https://www.notion.so/92719ab293f6492db52faa53a60efe68" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) reason: å¤±è´¥çš„åŸå› è¯´æ˜: è¿”å›ä¸€ä¸ªå¤±è´¥çš„ promise å¯¹è±¡,ç›´æ¥æ”¹å˜promiseçŠ¶æ€,ä»£ç ç¤ºä¾‹åŒä¸Š</span></span></blockquote><h3 id="https://www.notion.so/e93f5631f8ec48f2b23d47d27723d1f6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e93f5631f8ec48f2b23d47d27723d1f6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¥-Promise.all æ–¹æ³•: (promises) =&gt; {}</span></span></h3><pre id="https://www.notion.so/8daeafb6606a4751aebbcf61e0747bfc" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token literal-property property">promises</span><span class="token operator">:</span> åŒ…å« n ä¸ª promise çš„æ•°ç»„è¯´æ˜<span class="token operator">:</span> è¿”å›ä¸€ä¸ªæ–°çš„ promise<span class="token punctuation">,</span> åªæœ‰æ‰€æœ‰çš„ promise éƒ½æˆåŠŸæ‰æˆåŠŸ<span class="token punctuation">,</span> åªè¦æœ‰ä¸€ ä¸ªå¤±è´¥äº†å°±ç›´æ¥å¤±è´¥       <span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token keyword">let</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">let</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Oh Yeah'</span><span class="token punctuation">)</span>
       <span class="token keyword">const</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/9ba9fa91369b432e8eef9bc06e7a1a15" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9ba9fa91369b432e8eef9bc06e7a1a15"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¦-Promise.race æ–¹æ³•: (promises) =&gt; {}</span></span></h3><pre id="https://www.notion.so/532337195f144a08862cc52ad94e4741" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> promises<span class="token operator">:</span> åŒ…å« n ä¸ª promise çš„æ•°ç»„è¯´æ˜<span class="token operator">:</span> è¿”å›ä¸€ä¸ªæ–°çš„ promise<span class="token punctuation">,</span> ç¬¬ä¸€ä¸ªå®Œæˆçš„ promise çš„ç»“æœçŠ¶æ€å°±æ˜¯æœ€ç»ˆçš„ç»“æœçŠ¶æ€<span class="token punctuation">,</span>å¦‚p1å»¶æ—¶<span class="token punctuation">,</span>å¼€å¯äº†å¼‚æ­¥<span class="token punctuation">,</span>å†…éƒ¨æ­£å¸¸æ˜¯åŒæ­¥è¿›è¡Œ<span class="token punctuation">,</span>æ‰€ä»¥p2<span class="token operator">></span>p3<span class="token operator">></span>p1<span class="token punctuation">,</span>ç»“æœæ˜¯<span class="token constant">P2</span> <span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token keyword">let</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Oh Yeah'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//è°ƒç”¨</span>
   <span class="token keyword">const</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/f2e052073a464a65aaba81497ed1b488" class="Divider"></div><h2 id="https://www.notion.so/9213dc22d6a14ff49d60ffebc78d0663" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/9213dc22d6a14ff49d60ffebc78d0663"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4ã€Promiseçš„å‡ ä¸ªå…³é”®é—®é¢˜</span></span></h2><h3 id="https://www.notion.so/bf944bcf445647619440db35f0b1a098" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/bf944bcf445647619440db35f0b1a098"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â… -å¦‚ä½•æ”¹å˜ promise çš„çŠ¶æ€?</span></span></h3><blockquote id="https://www.notion.so/c629696d5aa2466a83d797b63c192ae8" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) resolve(value): å¦‚æœå½“å‰æ˜¯ pending å°±ä¼šå˜ä¸º resolved
(2) reject(reason): å¦‚æœå½“å‰æ˜¯ pending å°±ä¼šå˜ä¸º rejected
(3) æŠ›å‡ºå¼‚å¸¸: å¦‚æœå½“å‰æ˜¯ pending å°±ä¼šå˜ä¸º rejected</span></span></blockquote><h3 id="https://www.notion.so/e6c90d1199744cc0ae92600b9f70f014" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e6c90d1199744cc0ae92600b9f70f014"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¡-ä¸€ä¸ª promise æŒ‡å®šå¤šä¸ªæˆåŠŸ/å¤±è´¥å›è°ƒå‡½æ•°, éƒ½ä¼šè°ƒç”¨å—?</span></span></h3><blockquote id="https://www.notion.so/9761f2438c5c44c292be6b698b1f1393" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å½“ promise æ”¹å˜ä¸ºå¯¹åº”çŠ¶æ€æ—¶éƒ½ä¼šè°ƒç”¨,æ”¹å˜çŠ¶æ€å,å¤šä¸ªå›è°ƒå‡½æ•°éƒ½ä¼šè°ƒç”¨,å¹¶ä¸ä¼šè‡ªåŠ¨åœæ­¢
</span></span></blockquote><pre id="https://www.notion.so/fcaaaad692624021986db3857ee12d94" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">///æŒ‡å®šå›è°ƒ - 1</span>
       p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">//æŒ‡å®šå›è°ƒ - 2</span>
       p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/aa907467ee9d4ea3b987750dab7c4df5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/aa907467ee9d4ea3b987750dab7c4df5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¢- æ”¹å˜ promise çŠ¶æ€å’ŒæŒ‡å®šå›è°ƒå‡½æ•°è°å…ˆè°å?</span></span></h3><blockquote id="https://www.notion.so/4eb311b26c37448a8d55332852a1f35d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) éƒ½æœ‰å¯èƒ½, æ­£å¸¸æƒ…å†µä¸‹æ˜¯å…ˆæŒ‡å®šå›è°ƒå†æ”¹å˜çŠ¶æ€, ä½†ä¹Ÿå¯ä»¥å…ˆæ”¹çŠ¶æ€å†æŒ‡å®šå›è°ƒ å…ˆæŒ‡å®šå›è°ƒå†æ”¹å˜çŠ¶æ€(å¼‚æ­¥):å…ˆæŒ‡å®šå›è°ƒ--&gt; å†æ”¹å˜çŠ¶æ€ --&gt;æ”¹å˜çŠ¶æ€åæ‰è¿›å…¥å¼‚æ­¥é˜Ÿåˆ—æ‰§è¡Œå›è°ƒå‡½æ•° å…ˆæ”¹çŠ¶æ€å†æŒ‡å®šå›è°ƒ(åŒæ­¥):æ”¹å˜çŠ¶æ€ --&gt;æŒ‡å®šå›è°ƒ å¹¶é©¬ä¸Šæ‰§è¡Œå›è°ƒ
(2) å¦‚ä½•å…ˆæ”¹çŠ¶æ€å†æŒ‡å®šå›è°ƒ? --&gt;æ³¨æ„:æŒ‡å®šå¹¶ä¸æ˜¯æ‰§è¡Œ â‘  åœ¨æ‰§è¡Œå™¨ä¸­ç›´æ¥è°ƒç”¨ resolve()/reject() --&gt;å³,ä¸ä½¿ç”¨å®šæ—¶å™¨ç­‰æ–¹æ³•,æ‰§è¡Œå™¨å†…ç›´æ¥åŒæ­¥æ“ä½œ â‘¡ å»¶è¿Ÿæ›´é•¿æ—¶é—´æ‰è°ƒç”¨ then() --&gt;å³,åœ¨.then()è¿™ä¸ªæ–¹æ³•å¤–å†åŒ…ä¸€å±‚ä¾‹å¦‚å»¶æ—¶å™¨è¿™ç§æ–¹æ³•
(3) ä»€ä¹ˆæ—¶å€™æ‰èƒ½å¾—åˆ°æ•°æ®? â‘  å¦‚æœå…ˆæŒ‡å®šçš„å›è°ƒ, é‚£å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶, å›è°ƒå‡½æ•°å°±ä¼šè°ƒç”¨, å¾—åˆ°æ•°æ® â‘¡ å¦‚æœå…ˆæ”¹å˜çš„çŠ¶æ€, é‚£å½“æŒ‡å®šå›è°ƒæ—¶, å›è°ƒå‡½æ•°å°±ä¼šè°ƒç”¨, å¾—åˆ°æ•°æ®   </span></span></blockquote><pre id="https://www.notion.so/8cf779b2cb8d4941958e3bb1edb7561b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     <span class="token comment">//å¼‚æ­¥å†™æ³•,è¿™æ ·å†™ä¼šå…ˆæŒ‡å®šå›è°ƒ,å†æ”¹å˜çŠ¶æ€</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//è¿™æ˜¯åŒæ­¥å†™æ³•,è¿™æ ·å†™ä¼šå…ˆæ”¹å˜çŠ¶æ€,å†æŒ‡å®šå›è°ƒ</span>
     <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span></span></span></code></pre><blockquote id="https://www.notion.so/fd8c7bdb15b34ea6887a450a8dd00242" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(4) ä¸ªäººç†è§£--ç»“åˆæºç  æºç ä¸­,promiseçš„çŠ¶æ€æ˜¯é€šè¿‡ä¸€ä¸ªé»˜è®¤ä¸ºpaddingçš„å˜é‡è¿›è¡Œåˆ¤æ–­,æ‰€ä»¥å½“ä½ resolve/rejectå»¶æ—¶(å¼‚æ­¥å¯¼è‡´å½“thenåŠ è½½æ—¶,çŠ¶æ€è¿˜æœªä¿®æ”¹)å,è¿™æ—¶ç›´æ¥è¿›è¡Œp.then()ä¼šå‘ç°,ç›®å‰çŠ¶æ€è¿˜æ˜¯è¿›è¡Œä¸­,æ‰€ä»¥åªæ˜¯è¿™æ ·å¯¼è‡´åªæœ‰åŒæ­¥æ“ä½œæ‰èƒ½æˆåŠŸ. æ‰€ä»¥promiseå°†ä¼ å…¥çš„å›è°ƒå‡½æ•°æ‹·è´åˆ°promiseå¯¹è±¡å®ä¾‹ä¸Š,ç„¶ååœ¨resolve/rejectçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å†è¿›è¡Œè°ƒç”¨,è¾¾åˆ°å¼‚æ­¥çš„ç›®çš„ å…·ä½“ä»£ç å®ç°çœ‹ä¸‹æ–¹è‡ªå®šä¹‰promise</span></span></blockquote><h3 id="https://www.notion.so/b7236196d4e7412d84e18eb229b19e24" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b7236196d4e7412d84e18eb229b19e24"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…£-promise.then()è¿”å›çš„æ–° promise çš„ç»“æœçŠ¶æ€ç”±ä»€ä¹ˆå†³å®š?</span></span></h3><blockquote id="https://www.notion.so/130763753acd45dd843fe57eb75346cb" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) ç®€å•è¡¨è¾¾: ç”± then()æŒ‡å®šçš„å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœå†³å®š(2) è¯¦ç»†è¡¨è¾¾: â‘  å¦‚æœæŠ›å‡ºå¼‚å¸¸, æ–° promise å˜ä¸º rejected, reason ä¸ºæŠ›å‡ºçš„å¼‚å¸¸ â‘¡ å¦‚æœè¿”å›çš„æ˜¯é promise çš„ä»»æ„å€¼, æ–° promise å˜ä¸º resolved, value ä¸ºè¿”å›çš„å€¼ â‘¢ å¦‚æœè¿”å›çš„æ˜¯å¦ä¸€ä¸ªæ–° promise, æ­¤ promise çš„ç»“æœå°±ä¼šæˆä¸ºæ–° promise çš„ç»“æœ </span></span></blockquote><pre id="https://www.notion.so/309f817932a84c81a257d78b27921fe9" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//æ‰§è¡Œ then æ–¹æ³•</span>
   <span class="token keyword">let</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 1. æŠ›å‡ºé”™è¯¯ ,å˜ä¸º rejected</span>
     <span class="token keyword">throw</span> <span class="token string">'å‡ºäº†é—®é¢˜'</span><span class="token punctuation">;</span>
     <span class="token comment">// 2. è¿”å›ç»“æœæ˜¯é Promise ç±»å‹çš„å¯¹è±¡,æ–° promise å˜ä¸º resolved</span>
     <span class="token keyword">return</span> <span class="token number">521</span><span class="token punctuation">;</span>
     <span class="token comment">// 3. è¿”å›ç»“æœæ˜¯ Promise å¯¹è±¡,æ­¤ promise çš„ç»“æœå°±ä¼šæˆä¸ºæ–° promise çš„ç»“æœ</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
       <span class="token comment">// resolve('success');</span>
       <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/6cd786c7feec4156a8ac969546aa0f87" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6cd786c7feec4156a8ac969546aa0f87"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¤- promise å¦‚ä½•ä¸²è¿å¤šä¸ªæ“ä½œä»»åŠ¡?</span></span></h3><blockquote id="https://www.notion.so/febe5d78f11c4cfca9d683dda4ff08f5" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) promise çš„ then()è¿”å›ä¸€ä¸ªæ–°çš„ promise, å¯ä»¥å¼€æˆ then()çš„é“¾å¼è°ƒç”¨(2) é€šè¿‡ then çš„é“¾å¼è°ƒç”¨ä¸²è¿å¤šä¸ªåŒæ­¥/å¼‚æ­¥ä»»åŠ¡,è¿™æ ·å°±èƒ½ç”¨then()å°†å¤šä¸ªåŒæ­¥æˆ–å¼‚æ­¥æ“ä½œä¸²è”æˆä¸€ä¸ªåŒæ­¥é˜Ÿåˆ—</span></span></blockquote><pre id="https://www.notion.so/bd59b78a61f04324b2f2070b53f49962" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token operator">&lt;</span>script<span class="token operator">></span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></span></span></span></code></pre><h3 id="https://www.notion.so/dbe6b965d3e643e8b0ce0c2b45d14b1c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/dbe6b965d3e643e8b0ce0c2b45d14b1c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¥-promise å¼‚å¸¸ä¼ é€?</span></span></h3><blockquote id="https://www.notion.so/82089773d2034978b8b12113d8dd41c4" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">(1) å½“ä½¿ç”¨ promise çš„ then é“¾å¼è°ƒç”¨æ—¶, å¯ä»¥åœ¨æœ€åæŒ‡å®šå¤±è´¥çš„å›è°ƒ,(2) å‰é¢ä»»ä½•æ“ä½œå‡ºäº†å¼‚å¸¸, éƒ½ä¼šä¼ åˆ°æœ€åå¤±è´¥çš„å›è°ƒä¸­å¤„ç†æ³¨:å¯ä»¥åœ¨æ¯ä¸ªthen()çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ä¸­è¿›è¡Œerrå¤„ç†,ä¹Ÿå¯ä»¥åˆ©ç”¨å¼‚å¸¸ç©¿é€ç‰¹æ€§,åˆ°æœ€åç”¨catchå»æ‰¿æ¥ç»Ÿä¸€å¤„ç†,ä¸¤è€…ä¸€èµ·ç”¨æ—¶,å‰è€…ä¼šç”Ÿæ•ˆ(å› ä¸ºerrå·²ç»å°†å…¶å¤„ç†,å°±ä¸ä¼šå†å¾€ä¸‹ç©¿é€)è€Œèµ°ä¸åˆ°åé¢çš„catch</span></span></blockquote><h3 id="https://www.notion.so/fd6a98a9a10d4b9ebcd740ccdec32cd8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/fd6a98a9a10d4b9ebcd740ccdec32cd8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¦- ä¸­æ–­ promise é“¾?</span></span></h3><blockquote id="https://www.notion.so/5a0e42f6585f43889140247e1e390989" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åœ¨å…³é”®é—®é¢˜2ä¸­,å¯ä»¥å¾—çŸ¥,å½“promiseçŠ¶æ€æ”¹å˜æ—¶,ä»–çš„é“¾å¼è°ƒç”¨éƒ½ä¼šç”Ÿæ•ˆ,é‚£å¦‚æœæˆ‘ä»¬æœ‰è¿™ä¸ªä¸€ä¸ªå®é™…éœ€æ±‚:æˆ‘ä»¬æœ‰5ä¸ªthen(),ä½†å…¶ä¸­æœ‰æ¡ä»¶åˆ¤æ–­,å¦‚å½“æˆ‘ç¬¦åˆæˆ–è€…ä¸ç¬¦åˆç¬¬ä¸‰ä¸ªthenæ¡ä»¶æ—¶,è¦ç›´æ¥ä¸­æ–­é“¾å¼è°ƒç”¨,ä¸å†èµ°ä¸‹é¢çš„then,è¯¥å¦‚ä½•?(1) å½“ä½¿ç”¨ promise çš„ then é“¾å¼è°ƒç”¨æ—¶, åœ¨ä¸­é—´ä¸­æ–­, ä¸å†è°ƒç”¨åé¢çš„å›è°ƒå‡½æ•°(2) åŠæ³•: åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ª pendding çŠ¶æ€çš„promise å¯¹è±¡</span></span></blockquote><pre id="https://www.notion.so/35843a39b6144141b11c446165841cf5" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token operator">&lt;</span>script<span class="token operator">></span>
   <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//æœ‰ä¸”åªæœ‰è¿™ä¸€ä¸ªæ–¹å¼</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></span></span></span></code></pre><h1 id="https://www.notion.so/27e5ba442e8a4995b607f573cf09a711" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/27e5ba442e8a4995b607f573cf09a711"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">äºŒã€è‡ªå®šä¹‰Promiseæ‰‹å†™</span></span></h1><blockquote id="https://www.notion.so/d0cd0d90e7404695be1c9e19f40e371d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ä¸‹æ–¹çš„Promise.prototype.thenä¸Promise.resolveä¸ºä»€ä¹ˆä¸€ä¸ªæŒ‚è½½åœ¨prototypeè€Œå¦ä¸€ä¸ªæŒ‚è½½åœ¨å®ä¾‹å¯¹è±¡ä¸Š?è§£:åŸå› æ˜¯åˆ†åˆ«ä¸ºé™æ€æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•--&gt;ä¸Šé¢çš„éœ€è¦newå®ä¾‹åŒ–çš„æ—¶å€™è‡ªåŠ¨ç»§æ‰¿å®ä¾‹prototypeä¸Šçš„æ–¹æ³•å’Œå±æ€§,æ‰€ä»¥ç”¨å®ä¾‹å¯¹è±¡.then()æ¥è°ƒç”¨,è€Œä¸‹é¢çš„Promise.resolveæ˜¯é™æ€æ–¹æ³•,ä¸ç”¨new,æ˜¯å¯ä»¥ç›´æ¥Promise.resolve()è°ƒç”¨</span></span></blockquote><h2 id="https://www.notion.so/6fbf8829ad8c427397580211d458dbc4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6fbf8829ad8c427397580211d458dbc4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â… -Promiseçš„å®ä¾‹æ–¹æ³•å®ç°</span></span></h2><h3 id="https://www.notion.so/075b270387b346c68b02695be8f703b4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/075b270387b346c68b02695be8f703b4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1 - åˆå§‹ç»“æ„æ­å»º</span></span></h3><blockquote id="https://www.notion.so/659156cacf514e1a889bf47664ba1ce3" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">htmlå¼•å…¥,è¯¥ç« èŠ‚åç»­htmlå¤§éƒ¨åˆ†é‡å¤ é™¤éå¿…è¦,å¦åˆ™ä¸å†æ”¾ä¸Šæ¥</span></span></blockquote><pre id="https://www.notion.so/a4b91784939e4d558f159451514201ed" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Promise<span class="token operator">-</span>å°è£… <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">-</span> åˆå§‹ç»“æ„æ­å»º<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"./promise.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span><span class="token operator">=></span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></span></span></span></code></pre><blockquote id="https://www.notion.so/ca9a075b7ce04ca5b74f07f93050cdb3" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">promise.js --&gt;ä½¿ç”¨åŸç”Ÿå†™æ³•,æœ€åä¼šæ”¹ä¸ºclasså†™æ³•</span></span></blockquote><pre id="https://www.notion.so/0d766c349cd24be7835767991ef903e4" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">function</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/db20172355ab4004a0219570101c3eb2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/db20172355ab4004a0219570101c3eb2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2 - resolve ä¸ rejectæ„å»ºä¸åŸºç¡€å®ç°</span></span></h3><blockquote id="https://www.notion.so/2f96219f577f42af83a2b90fcb91312f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ä½¿ç”¨const self = this;ä¿å­˜thisæ‰§è¡Œ,ä½¿functionä¸­å¯ä»¥å–å¾—å½“å‰å®ä¾‹ps:å¯ä»¥ä¸ä½¿ç”¨è¯¥æ–¹æ³•ä¿å­˜,ä½†æ˜¯ä¸‹æ–¹functionéœ€è¦æ”¹ä¸ºç®­å¤´å‡½æ•°,å¦åˆ™functioné»˜è®¤æŒ‡å‘æ˜¯windowä¹‹åä»£ç é»˜è®¤ä½¿ç”¨selfä¿å­˜this,ç®­å¤´å‡½æ•°æ–¹å¼å°†åœ¨æœ€åæ”¹ä¸ºclasså†™æ³•æ—¶ä½¿ç”¨é»˜è®¤è®¾ç½® PromiseState = &#x27;pending&#x27;ä»¥åŠ PromiseResult = null,è¿™å°±æ˜¯promiseçŠ¶æ€åŸºç¡€</span></span></blockquote><pre id="https://www.notion.so/6a66abc62b4b42eab054b7db240c9495" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">//å£°æ˜æ„é€ å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//æ·»åŠ å±æ€§</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">//ä¿å­˜å®ä¾‹å¯¹è±¡çš„ this çš„å€¼</span>
<span class="token comment">/*  æ­¤å¤„å¯ä»¥ä¸å†™,ä½†æ˜¯ä¸‹é¢functionæ–¹æ³•éœ€è¦æ”¹ä¸ºç®­å¤´å‡½æ•°,å¦åˆ™functioné»˜è®¤æŒ‡å‘æ˜¯window */</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> 
  <span class="token comment">//resolve å‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token comment">//1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)</span>
    self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'fulfilled'</span><span class="token punctuation">;</span> <span class="token comment">// resolved</span>
    <span class="token comment">//2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)</span>
    self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//reject å‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token comment">//1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)</span>
    self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span> <span class="token comment">// </span>
    <span class="token comment">//2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)</span>
    self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//åŒæ­¥è°ƒç”¨ã€æ‰§è¡Œå™¨å‡½æ•°ã€</span>
  <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/51ca346970d54a668746c457326a2f3d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/51ca346970d54a668746c457326a2f3d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3 - throw æŠ›å‡ºå¼‚å¸¸æ”¹å˜çŠ¶æ€</span></span></h3><blockquote id="https://www.notion.so/5d49d4ee33694557a2c5bb4bb4041218" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åœ¨2çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹:å°†æ‰§è¡Œå™¨æ”¾å…¥try-catch()ä¸­åœ¨catchä¸­ä½¿ç”¨reject()ä¿®æ”¹ promise å¯¹è±¡çŠ¶æ€ä¸ºã€å¤±è´¥ã€</span></span></blockquote><pre id="https://www.notion.so/f487b638b3b2489a9a39e6d07f734872" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//åŒæ­¥è°ƒç”¨ã€æ‰§è¡Œå™¨å‡½æ•°ã€</span>
    <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ä¿®æ”¹ promise å¯¹è±¡çŠ¶æ€ä¸ºã€å¤±è´¥ã€</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/203e5e30a03f4e73a7c8030147576443" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/203e5e30a03f4e73a7c8030147576443"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4 - çŠ¶æ€åªèƒ½ä¿®æ”¹ä¸€æ¬¡</span></span></h3><blockquote id="https://www.notion.so/ba563a458cdf4655b14aa64bc99b0130" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åŸºäº2 3ä»£ç ä¸­resolveå’Œrejectæ–¹æ³•è¿›ä¿®æ”¹åœ¨æˆåŠŸä¸å¤±è´¥å‡½æ•°ä¸­æ·»åŠ åˆ¤æ–­ if(self.PromiseState !== &#x27;pending&#x27;) return;,å¦‚æœè¿›å…¥å‡½æ•°æ—¶çŠ¶æ€ä¸ä¸ºpendingç›´æ¥é€€å‡º,è¿™æ ·å°±èƒ½åšåˆ°çŠ¶æ€åªèƒ½ä»pendingæ”¹è‡³å…¶ä»–çŠ¶æ€ä¸”åšåˆ°åªèƒ½æ”¹ä¸€æ¬¡</span></span></blockquote><pre id="https://www.notion.so/b2b00f9e0f2041788f2f88ccb17b028c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
 <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//æŠ›å‡ºå¼‚å¸¸</span>
      <span class="token comment">// throw "error";</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span>jsä¿®æ”¹<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

  <span class="token comment">//resolve å‡½æ•°</span>
    <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//åˆ¤æ–­çŠ¶æ€</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token comment">//1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)</span>
        self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'fulfilled'</span><span class="token punctuation">;</span><span class="token comment">// resolved</span>
        <span class="token comment">//2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)</span>
        self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//reject å‡½æ•°</span>
    <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//åˆ¤æ–­çŠ¶æ€</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token comment">//1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)</span>
        self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span><span class="token comment">// </span>
        <span class="token comment">//2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)</span>
        self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/ee924a2028f34c26beea81d76096d3b5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ee924a2028f34c26beea81d76096d3b5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5 - then æ–¹æ³•æ‰§è¡Œå›è°ƒåŸºç¡€å®ç°</span></span></h3><blockquote id="https://www.notion.so/d4b0bf88a3384c5a86037ae381a0f813" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ä¿®æ”¹Promise.prototype.thenæ–¹æ³•ä¼ å…¥then(æˆåŠŸå›è°ƒ,å¤±è´¥å›è°ƒ),å½“è°ƒç”¨thenå,ä¼šåˆ¤æ–­å½“å‰this.PromiseStateçš„çŠ¶æ€,å½“å…¶ä¸ºæˆåŠŸæ—¶è°ƒç”¨æˆåŠŸå›è°ƒ,å¤±è´¥æ—¶è°ƒç”¨å¤±è´¥å›è°ƒ</span></span></blockquote><pre id="https://www.notion.so/2897b404596f48248f57e599e3d88b5e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// resolve('OK');// reject("Error");</span>
      <span class="token keyword">throw</span> <span class="token string">"ERROR"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/565d151509274bc7ab7e06a1d14a3d8a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/565d151509274bc7ab7e06a1d14a3d8a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6 - å¼‚æ­¥ä»»åŠ¡ then æ–¹æ³•å®ç°</span></span></h3><blockquote id="https://www.notion.so/73052e3271dc432eb8533daab04b3cb5" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">æ­¤å¤„å¯¹äº5æœ‰å››å¤„ä¿®æ”¹,ä¸‹é¢ä¸Šjsä»£ç å½“æˆ‘è¿è¡Œå¼‚æ­¥ä»£ç å,æˆ‘çš„æ‰§è¡Œå™¨å†…éƒ¨ä»£ç è¿˜æœªè¿”å›(å› ä¸ºç”¨äº†å®šæ—¶å™¨,é‡Œé¢çš„ä»£ç è¿›å…¥äº†å¼‚æ­¥é˜Ÿåˆ—),æ‰€ä»¥å½“æˆ‘ä¸‹é¢çš„.then()è¿è¡Œæ—¶:æˆ‘çš„pä¸ºpendingçŠ¶æ€,æ‰€ä»¥æ ¹æœ¬ä¸ä¼šæ‰§è¡Œresolveä¸rejectæ–¹æ³•è§£:æ·»åŠ åˆ¤æ–­pendingçŠ¶æ€,å°†å½“å‰å›è°ƒå‡½æ•°ä¿å­˜åˆ°å®ä¾‹å¯¹è±¡(å­˜åˆ°å®ä¾‹ä¸Šæ˜¯ä¸ºäº†æ›´æ–¹ä¾¿)ä¸­,è¿™æ ·åç»­æ”¹å˜çŠ¶æ€æ—¶å€™æ‰è°ƒç”¨å¾—åˆ°ä¸ºä»€ä¹ˆè¦å°†å›è°ƒä¿å­˜åˆ°å®ä¾‹ä¸Šè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨?ç†ç”±:å› ä¸ºæˆ‘çš„å›è°ƒå‡½æ•°éœ€è¦åœ¨æˆ‘çš„promiseçŠ¶æ€æ”¹å˜å(æˆåŠŸæˆ–è€…å¤±è´¥),å†æ ¹æ®çŠ¶æ€é€‰æ‹©è¿è¡Œå“ªä¸ªå‡½æ•° æ‰€ä»¥å½“ä½ è°ƒç”¨then()æ—¶å´æ£€æµ‹åˆ°çŠ¶æ€ä¸ºpending,è¯´æ˜è¿™æ—¶å€™çš„promiseåœ¨å¼‚æ­¥é˜Ÿåˆ— ä¸èƒ½ç›´æ¥è¿è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥å‡½æ•°è§£å†³:å› ä¸ºresolveä¸rejectæ–¹æ³•ä¸then()ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­,å¹¶ä¸èƒ½å…±äº«then(æˆåŠŸå›è°ƒ,å¤±è´¥å›è°ƒ)çš„å‚æ•°,æ‰€ä»¥åœ¨åˆ¤æ–­çŠ¶æ€ä¸ºpendingæ—¶å°†å›è°ƒä¿å­˜åˆ°å®ä¾‹å¯¹è±¡ä¸Š.ç„¶åå°†å›è°ƒå‡½æ•°çš„è°ƒç”¨æ”¾åœ¨resolve()ä¸reject()ä¸­è¿™æ ·å½“æˆ‘ä»£ç è¿è¡Œåˆ°å¼‚æ­¥é˜Ÿåˆ—çš„resolve()æˆ–reject()æ—¶,å°±å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿è¡Œå›è°ƒå‡½æ•°,å®ç°å¼‚æ­¥thenæ­¤å¤„çš„thenä»æœ‰ç‘•ç–µ,éœ€è¦ç»§ç»­å®Œå–„</span></span></blockquote><pre id="https://www.notion.so/e3fe185045664219872a1321e53fed8e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
 <span class="token comment">//å®ä¾‹åŒ–å¯¹è±¡</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* resolve('OK');*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//å£°æ˜æ„é€ å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// å£°æ˜å±æ€§     </span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>           <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>æ–°æ·»åŠ <span class="token number">1</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> 
    
  <span class="token comment">//resolve å‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­çŠ¶æ€</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'fulfilled'</span><span class="token punctuation">;</span> self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token comment">//è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°  åŠ åˆ¤æ–­çš„åŸå› æ˜¯é˜²æ­¢æ— å›è°ƒæŠ¥é”™</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>callback<span class="token punctuation">.</span>onResolved<span class="token punctuation">)</span> <span class="token punctuation">{</span> self<span class="token punctuation">.</span>callback<span class="token punctuation">.</span><span class="token function">onResolved</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>æ–°æ·»åŠ <span class="token number">2</span> æœ€é‡è¦ 
  <span class="token punctuation">}</span>
    
  <span class="token comment">//reject å‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    self<span class="token punctuation">.</span>PromiseState <span class="token operator">=</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span> self<span class="token punctuation">.</span>PromiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token comment">//æ‰§è¡Œå›è°ƒ                       </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>callback<span class="token punctuation">.</span>onResolved<span class="token punctuation">)</span> <span class="token punctuation">{</span> self<span class="token punctuation">.</span>callback<span class="token punctuation">.</span><span class="token function">onResolved</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>æ–°æ·»åŠ <span class="token number">3</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token comment">//åˆ¤æ–­ pending çŠ¶æ€</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>æ–°æ·»åŠ <span class="token number">4</span>
    <span class="token comment">//ä¿å­˜å›è°ƒå‡½æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">onResolved</span><span class="token operator">:</span> onResolved<span class="token punctuation">,</span>
      <span class="token literal-property property">onRejected</span><span class="token operator">:</span> onRejected
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/adbd77a8d5f04f12bdad0f6db20e8580" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/adbd77a8d5f04f12bdad0f6db20e8580"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">7 - æŒ‡å®šå¤šä¸ªå›è°ƒ</span></span></h3><blockquote id="https://www.notion.so/013ed0f0f9ff40cca20adb20fa6f3497" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åŸºäº6ä»£ç è¿›è¡Œä¿®æ”¹ åªå±•ç¤ºä¿®æ”¹éƒ¨åˆ†ä»£ç 6ä¸­ä¿å­˜å›è°ƒå‡½æ•°çš„æ–¹å¼æœ‰BUG,å¦‚æœæˆ‘æœ‰å¤šä¸ª.then(),åé¢åŠ è½½çš„å›è°ƒå‡½æ•°ä¼šè¦†ç›–ä¹‹å‰çš„å›è°ƒå‡½æ•°,å¯¼è‡´æœ€åå›è°ƒå‡½æ•°æœ‰ä¸”åªæœ‰æœ€åä¸€ä¸ªè§£:ä½¿ç”¨æ•°ç»„çš„æ–¹å¼è¿›è¡Œå­˜å‚¨å›è°ƒå‡½æ•°,è°ƒç”¨æ—¶ä¹Ÿæ˜¯ç”¨æ•°ç»„å¾ªç¯å–å‡ºæ­¤å¤„çš„thenä»æœ‰ç‘•ç–µ,éœ€è¦ç»§ç»­å®Œå–„</span></span></blockquote><pre id="https://www.notion.so/d05f8dbc2e3340669126ab554bf241a4" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token comment">//å®ä¾‹åŒ–å¯¹è±¡</span>
   <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'No'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span><span class="token operator">=></span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span><span class="token operator">=></span><span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//resolve å‡½æ•°</span>
    <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token comment">//è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°</span>
        <span class="token comment">// if (self.callback.onResolved) { self.callback.onResolved(data); } </span>
        self<span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>ä¿®æ”¹<span class="token number">1</span>
            item<span class="token punctuation">.</span><span class="token function">onResolved</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//reject å‡½æ•°</span>
    <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token operator">...</span><span class="token operator">...</span>
        <span class="token comment">//æ‰§è¡Œå¤±è´¥çš„å›è°ƒ</span>
        <span class="token comment">// if (self.callback.onResolved) { self.callback.onResolved(data);}</span>
        self<span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span>        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>ä¿®æ”¹<span class="token number">2</span>
            item<span class="token punctuation">.</span><span class="token function">onRejected</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
  <span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">//åˆ¤æ–­ pending çŠ¶æ€</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//ä¿å­˜å›è°ƒå‡½æ•°</span>
        <span class="token comment">//  this.callback = { onResolved: onResolved, onRejected: onRejected }</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>ä¿®æ”¹<span class="token number">3</span>
            <span class="token literal-property property">onResolved</span><span class="token operator">:</span> onResolved<span class="token punctuation">,</span>
            <span class="token literal-property property">onRejected</span><span class="token operator">:</span> onRejected
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/d99f72343b644163b369b8c7d4cefc3a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d99f72343b644163b369b8c7d4cefc3a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">8 - åŒæ­¥ä»»åŠ¡ then è¿”å›ç»“æœ</span></span></h3><blockquote id="https://www.notion.so/eb23461a9741475787cf7b99a8df0687" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åœ¨ä¹‹å‰çš„thenè¿è¡Œç»“æœä¸­å¾—çŸ¥,æˆ‘ä»¬ä½¿ç”¨thenåçš„è¿”å›ç»“æœæ˜¯å…¶å›è°ƒå‡½æ•°çš„è¿”å›ç»“æœ,è€Œæˆ‘ä»¬éœ€è¦çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡è§£:æ‰€ä»¥æˆ‘ä»¬åœ¨thenä¸­return new Promise(),ä½¿å…¶å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡åœ¨ä¸ºè§£å†³é—®é¢˜1åäº§ç”Ÿä¸€ä¸ªæ–°é—®é¢˜:æ–°çš„promiseå¯¹è±¡å› ä¸ºæ²¡æœ‰ç”¨rejerectä¸resolveæ–¹æ³•,å¯¼è‡´è¿”å›çš„çŠ¶æ€ä¸€ç›´æ˜¯pendingè§£:åœ¨æ–°çš„promiseä¸­åˆ¤æ–­è¿è¡Œå›è°ƒå‡½æ•°åçš„è¿”å›å€¼æ˜¯ä»€ä¹ˆ,ç„¶åæ ¹æ®å…¶ä¸åŒç±»å‹ç»™å…¶èµ‹äºˆä¸åŒçŠ¶æ€ â… -if(result instanceof Promise):è¿”å›å€¼ä¸€ä¸ªæ–°çš„â‘¡promiseå¯¹è±¡(å› ä¸ºæ˜¯æ–°çš„promiseçš„å›è°ƒå‡½æ•°è¿”å›å€¼,ç§°â‘¡promiseå¯¹è±¡),åœ¨è¿”å›å€¼(å› ä¸ºæ˜¯promiseå¯¹è±¡)çš„.then()å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨rejerectä¸resolveæ–¹æ³•,å°†å…¶è‡ªèº«çš„çŠ¶æ€èµ‹äºˆå¤–å±‚çš„promise, å³ å›è°ƒå‡½æ•°ä¸­çš„promise èµ‹å€¼ ç»™thenè¿”å›å€¼ , æ‰€ä»¥ æœ€ç»ˆè¿”å›çŠ¶æ€==å›è°ƒå‡½æ•°ä¸­çš„æ–°promiseçŠ¶æ€ â…¡-å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªépromiseå¯¹è±¡,è¿”å›çŠ¶æ€è®¾ç½®ä¸ºæˆåŠŸ â…¢-å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªå¼‚å¸¸,è¿”å›çŠ¶æ€è®¾ç½®ä¸ºå¤±è´¥</span></span></blockquote><pre id="https://www.notion.so/833a5e27411c4222b0bda7dd5eb81a63" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
  <span class="token comment">//å®ä¾‹åŒ–å¯¹è±¡</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ‰§è¡Œ then æ–¹æ³•</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
     <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token string">"FAIL"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">//è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState</span>
 <span class="token comment">//  if(this.PromiseState === 'fulfilled'){ onResolved(this.PromiseResult);} æœªä¿®æ”¹æ—¶ä»£ç </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>ä¿®æ”¹<span class="token number">1</span> 
            <span class="token keyword">try</span><span class="token punctuation">{</span>
                <span class="token comment">//è·å–å›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ</span>
                <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//åˆ¤æ–­</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//å¦‚æœæ˜¯ Promise ç±»å‹çš„å¯¹è±¡,æˆ‘å°±å°†ä¸‹ä¸€ä¸ªpromiseç»“æœèµ‹äºˆå¤–å±‚</span>
                    result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">r</span><span class="token operator">=></span><span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token comment">//å¦‚æœè¿”å›çš„ä¸æ˜¯promiseå¯¹è±¡,éƒ½å°†å…¶èµ‹äºˆæˆåŠŸçŠ¶æ€</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">rejerect</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//å¦‚æœå‡ºé”™äº†,åˆ™è¿”å›å¤±è´¥çŠ¶æ€</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'rejected'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>æ­¤éƒ¨åˆ†ä¿®æ”¹ä¸ä¿®æ”¹<span class="token number">1</span>ä¸€æ ·
        <span class="token comment">//åˆ¤æ–­ pending çŠ¶æ€</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">onResolved</span><span class="token operator">:</span> onResolved<span class="token punctuation">,</span> <span class="token literal-property property">onRejected</span><span class="token operator">:</span> onRejected<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/00ef0df96c344df391f5553f0577bab9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/00ef0df96c344df391f5553f0577bab9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">9 - å¼‚æ­¥ä»»åŠ¡ then è¿”å›ç»“æœ</span></span></h3><blockquote id="https://www.notion.so/7e477430c5dc441dbded94dbe45d4f3b" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å¼‚æ­¥ä»»åŠ¡æ˜¯ä¿®æ”¹if(this.PromiseState === &#x27;pending&#x27;)åé¢çš„å€¼,åŸå› å‚è€ƒ6,ä¸‹é¢ä»£ç åªä¸¾ä¾‹è¿™éƒ¨åˆ†ä¿®æ”¹å› ä¸ºæˆ‘ä»¬éœ€è¦å¢åŠ thençŠ¶æ€ä¿®æ”¹,æ‰€ä»¥åœ¨æˆ‘ä»¬ä¿å­˜å›è°ƒå‡½æ•°è¿™ä¸€æ­¥æˆ‘ä»¬å¯ä»¥å¯¹äºå›è°ƒå‡½æ•°è¿›è¡ŒåŠ å·¥,æ·»åŠ åˆ¤æ–­å…¶å›è°ƒå‡½æ•°çš„è¿”å›å€¼çš„ä»£ç å—å†å­˜å…¥å®ä¾‹çš„å›è°ƒå‡½æ•°ä¸­â… -å£°æ˜ä¸€ä¸ªæ–°çš„å‡½æ•°:å…¶å†…éƒ¨åŠŸèƒ½-&gt;å…ˆè¿è¡ŒonResolvedå›è°ƒå‡½æ•°,å†å°†å…¶è¿”å›å€¼å–å‡º,è¿›è¡Œåˆ¤æ–­å…¶è¿”å›å€¼(è¿™ä¸ªè¿‡ç¨‹åŒ8)â…¡-åŠ å·¥åå­˜å…¥å®ä¾‹å›è°ƒå‡½æ•°æ•°ç»„,ä¹‹ååœ¨resolveä¸rejectæ–¹æ³•ä¸­è°ƒç”¨å³å¯(åŒ6)</span></span></blockquote><pre id="https://www.notion.so/a08046337bd24dcc8a57e37e67d53d60" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
   <span class="token comment">//å®ä¾‹åŒ–å¯¹è±¡</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve('OK');</span>
    <span class="token comment">//æ‰§è¡Œ then æ–¹æ³•</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// return 'oh Yeah';  //å¦‚æœæœ‰è¿”å›,æ ¹æ®å…¶è¿”å›å€¼å¾—åˆ°ç›¸åº”çš„çŠ¶æ€:å­—ç¬¦ä¸²ä¸ºæˆåŠŸ,æŠ›å‡ºä¸ºé”™è¯¯</span>
      <span class="token keyword">throw</span> <span class="token string">'error'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">,</span> <span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¦‚æœåªæ˜¯æ‰“å°æ²¡è¿”å›,åˆ™å®é™…ä¸Šæ—¶è¿”å›ä¸€ä¸ªundefined,</span>
      <span class="token comment">//åœ¨æˆ‘ä»¬å°è£…jsä¸­,undefinedä¼šåˆ¤å®šä¸ºépromiseå¯¹è±¡,æ‰€ä»¥çŠ¶æ€ä¸ºæˆåŠŸ,ç»“æœä¸ºundefined</span>
      <span class="token keyword">return</span> <span class="token string">"sss"</span>   <span class="token comment">// throw 'error';</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
    <span class="token comment">//åˆ¤æ–­ pending çŠ¶æ€</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//ä¿å­˜å›è°ƒå‡½æ•°</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          
        <span class="token function-variable function">onResolved</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•°</span>
            <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆ¤æ–­ å…¶ç»“æœ</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                  <span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
                 <span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
          
        <span class="token function-variable function">onRejected</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//æ‰§è¡ŒæˆåŠŸå›è°ƒå‡½æ•°</span>
            <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆ¤æ–­</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                  <span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
                 <span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/e9ce62289b674088aa66563c408e7982" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e9ce62289b674088aa66563c408e7982"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">10- thenæ–¹æ³•ä»£ç ä¼˜åŒ–</span></span></h3><blockquote id="https://www.notion.so/04f404167b4e48f28f25dabcf483c362" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åœ¨8ã€9ã€10ä¸­å¯ä»¥çœ‹å‡º,å…¶åˆ¤æ–­ä¸æ”¹å˜è¿”å›ç»“æœçŠ¶æ€çš„ä»£ç å—æ˜¯åŸºæœ¬é‡å¤çš„,æ‰€ä»¥å¯ä»¥å°†å…¶æŠ½å‡º</span></span></blockquote><pre id="https://www.notion.so/a2c4c568eaf441ab887a290f4f45fcb7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    å°è£…å‡½æ•°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–å›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>PromiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ¤æ–­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//å¦‚æœæ˜¯ Promise ç±»å‹çš„å¯¹è±¡</span>
          result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">//ç»“æœçš„å¯¹è±¡çŠ¶æ€ä¸ºã€æˆåŠŸã€</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>    
    <span class="token comment">//è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>onResolved<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//åˆ¤æ–­ pending çŠ¶æ€</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>PromiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//ä¿å­˜å›è°ƒå‡½æ•°</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">onResolved</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>onResolved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onRejected</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/69d778073dab44b9a52fdece5af0b433" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/69d778073dab44b9a52fdece5af0b433"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">11 - catch æ–¹æ³•ä¸å¼‚å¸¸ç©¿é€ä¸å€¼ä¼ é€’</span></span></h3><blockquote id="https://www.notion.so/1186ca31b24d47e79d1778518eff6d93" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å¼‚å¸¸ç©¿é€:æ·»åŠ catch æ–¹æ³• ,å¹¶ä¸”éœ€è¦è¿›è¡Œå›è°ƒå‡½æ•°ä¸ºundefinedçš„å¤„ç†å½“æˆ‘then()ä¸­åªä¼ ä¸€ä¸ªå›è°ƒæˆ–è€…ä¸ä¼ å›è°ƒå‡½æ•°æ—¶,è¿è¡Œä»£ç ä¼šæŠ¥é”™,å› ä¸ºè¿è¡Œæ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°æ˜¯undefinedè§£:è¿›è¡Œå›è°ƒå‡½æ•°åˆ¤æ–­,å½“å…¶ä¸ºç©ºæ—¶,åŸºäºé»˜è®¤å›è°ƒå‡½æ•°å†…å®¹:ç›´æ¥å¾€å¤–æŠ›å‡ºè¿™æ ·ä¸‹æ–¹çš„then() or catch()å°±å¯ä»¥æ‰¿æ¥åˆ°å¼‚å¸¸æˆ–è€…å€¼</span></span></blockquote><pre id="https://www.notion.so/29840885d58442af95287f0a9e792ced" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  
<span class="token comment">//å®ä¾‹åŒ–å¯¹è±¡</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å€¼ä¼ é€’</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  then æ–¹æ³•</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>              <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>ä¿®æ”¹<span class="token number">1</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onRejected <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function-variable function">onRejected</span> <span class="token operator">=</span> <span class="token parameter">reason</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> reason<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onResolved <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function-variable function">onResolved</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=></span> value<span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ·»åŠ  catch æ–¹æ³•  </span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">catch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">onRejected</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>å¼‚å¸¸ç©¿é€ ä¿®æ”¹<span class="token number">2</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h2 id="https://www.notion.so/e4059e69d3bf46faaa3b0a0cbfb2ed49" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e4059e69d3bf46faaa3b0a0cbfb2ed49"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¡-Promiseçš„é™æ€æ–¹æ³•å®ç°</span></span></h2><h3 id="https://www.notion.so/279e6358b52643e39291c8be2fac9aad" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/279e6358b52643e39291c8be2fac9aad"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1 - Promise.resolve å°è£…</span></span></h3><blockquote id="https://www.notion.so/db94ed23e3bf409782234d018da9348f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">åˆ¤æ–­ä¼ å…¥çš„å‚æ•°æ˜¯å¦ä¸ºpromiseå¯¹è±¡:â… -å¦‚æœä¸ºpromise:å°†å…¶çŠ¶æ€ä¸ç»“æœèµ‹å€¼ç»™å¤–å±‚promiseå¯¹è±¡â…¡-å¦‚æœä¸ºépromise:çŠ¶æ€è®¾ç½®ä¸ºæˆåŠŸ</span></span></blockquote><pre id="https://www.notion.so/eb751a5749e44b4aa8cebb0fe51a2e88" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  
 <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>     
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// resolve('Success');</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Oh Yeah'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  resolve æ–¹æ³•</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//è¿”å›promiseå¯¹è±¡</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                <span class="token parameter">v</span><span class="token operator">=></span><span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token parameter">r</span><span class="token operator">=></span><span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment">//çŠ¶æ€è®¾ç½®ä¸ºæˆåŠŸ</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/899fe79401084020b3eeeabe225ae9e1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/899fe79401084020b3eeeabe225ae9e1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2 - Promise.resolve å°è£…</span></span></h3><blockquote id="https://www.notion.so/8ebc24d53e12438c9da9e9ca75928410" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ä¸åŒäºresolve,è¿™ä¸ªæ–¹æ³•åªè¦æŠŠä¼ å…¥å‚æ•°å†æ¬¡ä¼ å‡ºå»,å¹¶å°†çŠ¶æ€æ”¹ä¸ºå¤±è´¥å³å¯</span></span></blockquote><pre id="https://www.notion.so/3a9db002af1741ed874f9f5d882b618e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  
   <span class="token comment">//Promise.reject</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  reject æ–¹æ³•</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/5167f14778c04c1daf0baf2b54780824" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5167f14778c04c1daf0baf2b54780824"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3 - Promise.all å°è£…</span></span></h3><blockquote id="https://www.notion.so/b16bd9eecbe148b3a4043e2c354d487e" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">éå†ä¼ å…¥çš„promiseæ•°ç»„,æ¯å½“éå†ç»“æœæ˜¯æˆåŠŸ,åˆ™ç”¨è®¡æ•°å™¨è®°å½•,å½“è®¡æ•°å™¨ç­‰åŒäºæ•°ç»„é•¿åº¦,åˆ™å…¨éƒ¨æˆåŠŸ,è¿™æ—¶å€™å¯ä»¥è¿”å›æˆåŠŸçŠ¶æ€å¦‚æœå½“æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªpromiseçš„æ‰§è¡Œç»“æœæ˜¯reject,ç›´æ¥ä¸­æ–­,è¿”å›çŠ¶æ€ä¸ºå¤±è´¥</span></span></blockquote><pre id="https://www.notion.so/dba5d928d9b24517998ada10f39d5e6c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Oh Yeah'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è°ƒç”¨ all æ–¹æ³•</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  all æ–¹æ³•</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//è¿”å›ç»“æœä¸ºpromiseå¯¹è±¡</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">//å£°æ˜å˜é‡</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//éå†</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">//å¾—çŸ¥å¯¹è±¡çš„çŠ¶æ€æ˜¯æˆåŠŸ</span>
        <span class="token comment">//æ¯ä¸ªpromiseå¯¹è±¡ éƒ½æˆåŠŸ</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//å°†å½“å‰promiseå¯¹è±¡æˆåŠŸçš„ç»“æœ å­˜å…¥åˆ°æ•°ç»„ä¸­</span>
        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>
        <span class="token comment">//åˆ¤æ–­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//ä¿®æ”¹çŠ¶æ€</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/3a4b02b8ae8245c39a1dcf8907fa1d09" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3a4b02b8ae8245c39a1dcf8907fa1d09"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4 - Promise.race å°è£…</span></span></h3><blockquote id="https://www.notion.so/7a178f5d02084b648f0a091ecf82f4fc" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">ç›´æ¥è°å…ˆæ‰§è¡Œå°±è¿”å›è°çš„è¿è¡Œç»“æœå³å¯</span></span></blockquote><pre id="https://www.notion.so/3f254cd32ab64956925e2a68e8f80600" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>htmlè°ƒç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  
 <span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Oh Yeah'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è°ƒç”¨ race æ–¹æ³•</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span>jsä¿®æ”¹ä¸å®ç°<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">//æ·»åŠ  race æ–¹æ³•</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">race</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¿®æ”¹è¿”å›å¯¹è±¡çš„çŠ¶æ€ä¸º ã€æˆåŠŸã€</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¿®æ”¹è¿”å›å¯¹è±¡çš„çŠ¶æ€ä¸º ã€å¤±è´¥ã€</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h2 id="https://www.notion.so/6cbb5e521974491b9a00cd5f4158b88d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6cbb5e521974491b9a00cd5f4158b88d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">â…¢-å…¶ä»–ä¼˜åŒ–</span></span></h2><h3 id="https://www.notion.so/60605b2d71524106bdb71c4f175b1a90" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/60605b2d71524106bdb71c4f175b1a90"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1 - å›è°ƒå‡½æ•°ã€å¼‚æ­¥æ‰§è¡Œã€</span></span></h3><blockquote id="https://www.notion.so/ab7685b5149845ed9820209b7063233c" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å¦‚æœæˆ‘ä»¬è¿è¡Œä¸‹é¢ä»£ç ,æ­£ç¡®é¡ºåºæ—¶: 111 --&gt; 333 --&gt;222 let p1 = new Promise((resolve, reject) =&gt; {
     reject(&#x27;OK&#x27;);
     console.log(111);
   });

   p1.then(value =&gt; {
     console.log(222);
   }, reason =&gt; {
     console.log(444);
   });

   console.log(333);ä½†å½“æˆ‘ä»¬è¿è¡Œä¹‹å‰ä»£ç æ—¶:111 --&gt; 222 --&gt; 333æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„thenæ–¹æ³•å˜æˆå¼‚æ­¥æ–¹æ³•æˆ‘ä»¬åªè¦åœ¨ä»¥ä¸‹å››å¤„åœ°æ–¹çš„å›è°ƒå‡½æ•°è°ƒç”¨å¤–å±‚åŒ…è£¹ä¸€å±‚å®šæ—¶å™¨(ä¸ä¸€å®šæ˜¯å®šæ—¶å™¨,å¼€å¯å¼‚æ­¥å³å¯),å³å¯åšåˆ°å¼‚æ­¥æ“ä½œfunction resolve(data){
       setTimeout(() =&gt; { self.callbacks.forEach(item =&gt; { item.onResolved(data); }); });--ä¿®æ”¹1
   }
  //reject å‡½æ•°
   function reject(data){
       setTimeout(() =&gt; { self.callbacks.forEach(item =&gt; { item.onRejected(data); }); });---ä¿®æ”¹2
   }

//æ·»åŠ  then æ–¹æ³•
Promise.prototype.then = function(onResolved, onRejected){
   return new Promise((resolve, reject) =&gt; {
       //è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState
      /*  ä¿®æ”¹å‰ä»£ç 
      if (this.PromiseState === &#x27;fulfilled&#x27;) { callback(onResolved); }
        if (this.PromiseState === &#x27;rejected&#x27;) { callback(onRejected);
        */
       if(this.PromiseState === &#x27;fulfilled&#x27;){setTimeout(() =&gt; { callback(onResolved);});}  -----ä¿®æ”¹3
       if(this.PromiseState === &#x27;rejected&#x27;){ setTimeout(() =&gt; { callback(onRejected);});   ---ä¿®æ”¹4
       }
   }ç›¸å…³åŸç†å‚ç…§jsäº‹ä»¶å¾ªç¯æœºåˆ¶ã€å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</span></span></blockquote><h3 id="https://www.notion.so/61e0ec8a2aa946a2b7ef6983997ae88d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/61e0ec8a2aa946a2b7ef6983997ae88d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2- classæ”¹å†™promise</span></span></h3><blockquote id="https://www.notion.so/4ce6d12ab01e43879429810e7115ad73" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">å…¶ä¸­å°†self=thisä¿å­˜thisæŒ‡å‘æ–¹å¼æ”¹ä¸ºç®­å¤´å‡½æ•°è¡¨ç¤º(åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ä¹Ÿæœ‰æ•ˆæœ)å°†å…¶æ”¹ä¸ºclasså†™æ³•ä¸‹é¢ä¸ºpromisedemo.jsä»£ç class Promise {
 //æ„é€ æ–¹æ³•
 constructor(executor) {
   //æ·»åŠ å±æ€§
   this.PromiseState = &#x27;pending&#x27;;
   this.PromiseResult = null;
   //å£°æ˜å±æ€§
   this.callbacks = [];
   //ä¿å­˜å®ä¾‹å¯¹è±¡çš„ this çš„å€¼
   //resolve å‡½æ•°
   let resolve = (data) =&gt; {
     //åˆ¤æ–­çŠ¶æ€
     if (this.PromiseState !== &#x27;pending&#x27;) return;
     //1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)
     this.PromiseState = &#x27;fulfilled&#x27;; // resolved
     //2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)
     this.PromiseResult = data;
     //è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°
     setTimeout(() =&gt; {
       this.callbacks.forEach(item =&gt; {
         item.onResolved(data);
       });
     });
   }
   //reject å‡½æ•°
   let reject = (data) =&gt; {
     //åˆ¤æ–­çŠ¶æ€
     if (this.PromiseState !== &#x27;pending&#x27;) return;
     //1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ (promiseState)
     this.PromiseState = &#x27;rejected&#x27;; // 
     //2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ (promiseResult)
     this.PromiseResult = data;
     //æ‰§è¡Œå¤±è´¥çš„å›è°ƒ
     setTimeout(() =&gt; {
       this.callbacks.forEach(item =&gt; {
         item.onRejected(data);
       });
     });
   }
   try {
     //åŒæ­¥è°ƒç”¨ã€æ‰§è¡Œå™¨å‡½æ•°ã€
     executor(resolve, reject);
   } catch (e) {
     //ä¿®æ”¹ promise å¯¹è±¡çŠ¶æ€ä¸ºã€å¤±è´¥ã€
     reject(e);
   }
 }

 //then æ–¹æ³•å°è£…
 then(onResolved, onRejected) {
   //åˆ¤æ–­å›è°ƒå‡½æ•°å‚æ•°
   if (typeof onRejected !== &#x27;function&#x27;) {
     onRejected = reason =&gt; {
       throw reason;
     }
   }
   if (typeof onResolved !== &#x27;function&#x27;) {
     onResolved = value =&gt; value;
     //value =&gt; { return value};
   }
   return new Promise((resolve, reject) =&gt; {
     //å°è£…å‡½æ•°
     let callback = (type) =&gt; {
       try {
         //è·å–å›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ
         let result = type(this.PromiseResult);
         //åˆ¤æ–­
         if (result instanceof Promise) {
           //å¦‚æœæ˜¯ Promise ç±»å‹çš„å¯¹è±¡
           result.then(v =&gt; {
             resolve(v);
           }, r =&gt; {
             reject(r);
           })
         } else {
           //ç»“æœçš„å¯¹è±¡çŠ¶æ€ä¸ºã€æˆåŠŸã€
           resolve(result);
         }
       } catch (e) {
         reject(e);
       }
     }
     //è°ƒç”¨å›è°ƒå‡½æ•°  PromiseState
     if (this.PromiseState === &#x27;fulfilled&#x27;) {
       setTimeout(() =&gt; {
         callback(onResolved);
       });
     }
     if (this.PromiseState === &#x27;rejected&#x27;) {
       setTimeout(() =&gt; {
         callback(onRejected);
       });
     }
     //åˆ¤æ–­ pending çŠ¶æ€
     if (this.PromiseState === &#x27;pending&#x27;) {
       //ä¿å­˜å›è°ƒå‡½æ•°
       this.callbacks.push({
         onResolved: function () {
           callback(onResolved);
         },
         onRejected: function () {
           callback(onRejected);
         }
       });
     }
   })
 }

 //catch æ–¹æ³•
 catch (onRejected) {
   return this.then(undefined, onRejected);
 }

 //æ·»åŠ  resolve æ–¹æ³•
 static resolve(value) {
   //è¿”å›promiseå¯¹è±¡
   return new Promise((resolve, reject) =&gt; {
     if (value instanceof Promise) {
       value.then(v =&gt; {
         resolve(v);
       }, r =&gt; {
         reject(r);
       })
     } else {
       //çŠ¶æ€è®¾ç½®ä¸ºæˆåŠŸ
       resolve(value);
     }
   });
 }

 //æ·»åŠ  reject æ–¹æ³•
 static reject(reason) {
   return new Promise((resolve, reject) =&gt; {
     reject(reason);
   });
 }

 //æ·»åŠ  all æ–¹æ³•
 static all(promises) {
   //è¿”å›ç»“æœä¸ºpromiseå¯¹è±¡
   return new Promise((resolve, reject) =&gt; {
     //å£°æ˜å˜é‡
     let count = 0;
     let arr = [];
     //éå†
     for (let i = 0; i &lt; promises.length; i++) {
       //
       promises[i].then(v =&gt; {
         //å¾—çŸ¥å¯¹è±¡çš„çŠ¶æ€æ˜¯æˆåŠŸ
         //æ¯ä¸ªpromiseå¯¹è±¡ éƒ½æˆåŠŸ
         count++;
         //å°†å½“å‰promiseå¯¹è±¡æˆåŠŸçš„ç»“æœ å­˜å…¥åˆ°æ•°ç»„ä¸­
         arr[i] = v;
         //åˆ¤æ–­
         if (count === promises.length) {
           //ä¿®æ”¹çŠ¶æ€
           resolve(arr);
         }
       }, r =&gt; {
         reject(r);
       });
     }
   });
 }

 //æ·»åŠ  race æ–¹æ³•
 static race(promises) {
   return new Promise((resolve, reject) =&gt; {
     for (let i = 0; i &lt; promises.length; i++) {
       promises[i].then(v =&gt; {
         //ä¿®æ”¹è¿”å›å¯¹è±¡çš„çŠ¶æ€ä¸º ã€æˆåŠŸã€
         resolve(v);
       }, r =&gt; {
         //ä¿®æ”¹è¿”å›å¯¹è±¡çš„çŠ¶æ€ä¸º ã€å¤±è´¥ã€
         reject(r);
       })
     }
   });
 }
}</span></span></blockquote><blockquote id="https://www.notion.so/533d2dec46b946e4a47ba73503ff94f0" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">htmlæ–‡ä»¶è°ƒç”¨&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
 &lt;meta charset=&quot;UTF-8&quot;&gt;
 &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
 &lt;title&gt;classç‰ˆæœ¬å°è£…&lt;/title&gt;
 &lt;script src=&quot;./promisedemo.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
 &lt;script&gt;
   let p1 = new Promise((resolve, reject) =&gt; {
     setTimeout(() =&gt; {
       // resolve(&quot;OK&quot;);
       reject(&quot;Erosssr&quot;);
     })
   });

   p1.then(value =&gt; {
     console.log(value);
   }, reason =&gt; {
     console.warn(reason);
   });

   console.log(Promise.resolve(&#x27;OK&#x27;));
 &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</span></span></blockquote><h1 id="https://www.notion.so/90dd4fabb5f7471f9e33f2b7bc3e0624" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/90dd4fabb5f7471f9e33f2b7bc3e0624"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ä¸‰ã€generator + async + await</span></span></h1><h2 id="https://www.notion.so/548c286178d2489b977520939927ac80" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/548c286178d2489b977520939927ac80"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">generator</span></span></h2><div id="https://www.notion.so/4214883a053b4c3c92e42def110a5da6" class="Bookmark"><a href="https://es6.ruanyifeng.com/#docs/generator"><h5 class="Bookmark__Title">ES6 å…¥é—¨æ•™ç¨‹</h5><p class="Bookmark__Desc">Oops! ... File not found! ã€ŠECMAScript 6 å…¥é—¨æ•™ç¨‹ã€‹æ˜¯ä¸€æœ¬å¼€æºçš„JavaScriptè¯­è¨€æ•™ç¨‹ï¼Œå…¨é¢ä»‹ç»ECMAScript 6æ–°å¢çš„è¯­æ³•ç‰¹æ€§ã€‚ æœ¬ä¹¦åŠ›äº‰è¦†ç›–ES6ä¸ES5çš„æ‰€æœ‰ä¸åŒä¹‹å¤„ï¼Œå¯¹æ¶‰åŠçš„è¯­æ³•çŸ¥è¯†ç»™äºˆè¯¦ç»†ä»‹ç»ï¼Œå¹¶ç»™å‡ºå¤§é‡ç®€æ´æ˜“æ‡‚çš„ç¤ºä¾‹ä»£ç ã€‚ æœ¬ä¹¦ä¸ºä¸­çº§éš¾åº¦ï¼Œé€‚åˆå·²æœ‰ä¸€å®šJavaScriptè¯­è¨€åŸºç¡€çš„è¯»è€…ï¼Œäº†è§£è¿™é—¨è¯­è¨€çš„æœ€æ–°è¿›å±•ï¼›ä¹Ÿå¯å½“ä½œå‚è€ƒæ‰‹å†Œï¼ŒæŸ¥å¯»æ–°å¢çš„è¯­æ³•ç‚¹ã€‚</p><p class="Bookmark__Link">https://es6.ruanyifeng.com/#docs/generator</p></a></div><h2 id="https://www.notion.so/af3b66e9fae748d2ab81723ce30a9cc6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/af3b66e9fae748d2ab81723ce30a9cc6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">async+await</span></span></h2><div id="https://www.notion.so/4ac3461ec2c549fd813506b5b0eeda10" class="Bookmark"><a href="https://es6.ruanyifeng.com/#docs/async"><h5 class="Bookmark__Title">ES6 å…¥é—¨æ•™ç¨‹</h5><p class="Bookmark__Desc">Oops! ... File not found! ã€ŠECMAScript 6 å…¥é—¨æ•™ç¨‹ã€‹æ˜¯ä¸€æœ¬å¼€æºçš„JavaScriptè¯­è¨€æ•™ç¨‹ï¼Œå…¨é¢ä»‹ç»ECMAScript 6æ–°å¢çš„è¯­æ³•ç‰¹æ€§ã€‚ æœ¬ä¹¦åŠ›äº‰è¦†ç›–ES6ä¸ES5çš„æ‰€æœ‰ä¸åŒä¹‹å¤„ï¼Œå¯¹æ¶‰åŠçš„è¯­æ³•çŸ¥è¯†ç»™äºˆè¯¦ç»†ä»‹ç»ï¼Œå¹¶ç»™å‡ºå¤§é‡ç®€æ´æ˜“æ‡‚çš„ç¤ºä¾‹ä»£ç ã€‚ æœ¬ä¹¦ä¸ºä¸­çº§éš¾åº¦ï¼Œé€‚åˆå·²æœ‰ä¸€å®šJavaScriptè¯­è¨€åŸºç¡€çš„è¯»è€…ï¼Œäº†è§£è¿™é—¨è¯­è¨€çš„æœ€æ–°è¿›å±•ï¼›ä¹Ÿå¯å½“ä½œå‚è€ƒæ‰‹å†Œï¼ŒæŸ¥å¯»æ–°å¢çš„è¯­æ³•ç‚¹ã€‚</p><p class="Bookmark__Link">https://es6.ruanyifeng.com/#docs/async</p></a></div><h3 id="https://www.notion.so/29b0d08ec70d45799a766df09b0b029a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/29b0d08ec70d45799a766df09b0b029a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ç”¨generator/nextå®ç°async/awaitï¼š</span></span></h3><pre id="https://www.notion.so/7cf53802c4cb40fa9c075b9792ff07c9" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">function</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token parameter">genF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gen <span class="token operator">=</span> genF<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">nextF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ‰§è¡Œstepä¼ å…¥çš„å‡½æ•°å£°æ˜å‚æ•°</span>
      <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> next <span class="token operator">=</span> <span class="token function">nextF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      
      <span class="token comment">// æ¯ä¸€ä¸ªnext()éƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰valueå’Œdoneå±æ€§</span>
      <span class="token comment">// valueæ˜¯yieldåé¢è¡¨è¾¾å¼çš„ç»“æœï¼Œdoneè¡¨è¾¾generatorå‡½æ•°æ˜¯å¦ç»“æŸæ‰€æœ‰yield</span>
      <span class="token comment">// åˆ¤æ–­generatorå‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœç»“æŸäº†ï¼Œåˆ™å°†æœ€åreturnçš„ç»“æœä½œä¸ºè¿”å›Promiseå¯¹è±¡çš„ç»“æœï¼ŒçŠ¶æ€ä¸ºæˆåŠŸ</span>
        <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// å¦‚æœgeneratorå‡½æ•°æ²¡æœ‰ç»“æŸï¼Œåˆ™å°†æ¯æ¬¡yieldåè¡¨è¾¾å¼çš„å€¼è½¬åŒ–ä¸ºPromiseå¯¹è±¡ (é™æ€æ–¹æ³•resolveçš„ç”¨æ³•)</span>
      <span class="token comment">// å¹¶è°ƒç”¨thenæ–¹æ³•ï¼Œæ‰§è¡Œå¸¦å€¼çš„nextæ“ä½œ</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">r</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨nextçš„generatorå‡½æ•°å¯åŠ¨å™¨ï¼Œä¼ å…¥çš„å‚æ•°ä¸ºundefined</span>
    <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">/*
async function fn(args) {

}
 */</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/be68efb5a1b24044ac4c083af776ed0c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/be68efb5a1b24044ac4c083af776ed0c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">async/awaitçš„æ‰§è¡Œé¡ºåº</span></span></h3><pre id="https://www.notion.so/0021e910ca394bad93859d2e834bfd46" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3333333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/121dc84db4d6401f8d0c7cc112095f78" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä¸Šé¢çš„ä»£ç ï¼Œæ‰§è¡Œ</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">f1()</code></span><span class="SemanticString">ä¹‹åï¼Œå…ˆæ‰“å°</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">111111</code></span><span class="SemanticString">ï¼Œç„¶åæ˜¯é‡ç‚¹ï¼Œå…ˆæ‰§è¡Œawaitåé¢çš„è¡¨è¾¾å¼</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">f2()</code></span><span class="SemanticString">ï¼Œè¾“å‡º</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">333333</code></span><span class="SemanticString">ï¼Œ</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">f2()</code></span><span class="SemanticString">è¿”å›çš„ç»“æœä¸ºæˆåŠŸçŠ¶æ€å€¼ä¸ºundefinedçš„Promiseå¯¹è±¡ï¼Œawaitç›¸å½“äº</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Promise.resolve().then()</code></span><span class="SemanticString">ï¼Œç›¸å½“äºæŠŠåé¢çš„æ‰€æœ‰ä»£ç éƒ½å‹å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…å½“å‰å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å†…å®¹æ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šå¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å†…å®¹</span></span></p></div><div id="https://www.notion.so/1db64e51d0f34f529da11f2ac6904f0f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/c237506ff1bd4b7fadabb6be2f3c6cc1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/3b562e0c8f3b42879230823d77655bd9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3b562e0c8f3b42879230823d77655bd9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">async/awaité¢è¯•é¢˜</span></span></h3><pre id="https://www.notion.so/2fa6f82619d5485fb14779cac1bb24c9" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"async1 start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"async1 end"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">'async return'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"async2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"script start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"setTimeout"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// å…ˆæ‰§è¡Œasync1()ï¼Œé‡Œé¢æœ‰awaitå¹¶å°†å…¶åä»£ç å‹å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶æœ¬è¡Œä»£ç åé¢çš„.thenæ–¹æ³•æ²¡æœ‰æ‰§è¡Œ</span>
<span class="token comment">// å½“ç¬¬ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆå…¨å±€ä»£ç ï¼‰æ‰§è¡Œå®Œæ¯•åï¼Œå¼€å§‹æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</span>
<span class="token comment">// async1ä¸­çš„awaitåé¢ä»£ç è¢«æ‰§è¡Œï¼Œè¿”å›Promiseå¯¹è±¡çš„ç»“æœä½œä¸ºmessageä¼ å…¥thenæ–¹æ³•ä¸­ï¼Œå¹¶å°†thenæ–¹æ³•å‹å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
<span class="token comment">// æ³¨æ„ï¼šåªæœ‰async1()æ‰§è¡Œå®Œæ¯•åæ‰ä¼šå°†thenæ¨å…¥é˜Ÿåˆ—ï¼Œä¸æ˜¯ä¸€å¼€å§‹å°±æ¨å…¥çš„</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"promise1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"promise2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"script end"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/*
è¾“å‡ºé¡ºåºå¦‚ä¸‹ï¼š
script start
async1 start
async2Â·
promise1
script end
async1 end
promise2
async return
setTimeout
*/</span></span></span></span></code></pre><div id="https://www.notion.so/d45b8c0771044f1db2ecf41603471ae4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/a42afca749be41c28e705a05057fae86" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span>rej</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">'hello one'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'good morning'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello begins'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p
<span class="token punctuation">}</span>
 
<span class="token comment">// éš¾ç‚¹åœ¨äºthenå’Œawaitè¿™ä¸¤ä¸ªå¾®ä»»åŠ¡ä¹‹é—´çš„å‹å…¥æ‰§è¡Œé¡ºåº  --> </span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello1111111111'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'hello two'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello22222222222'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'hello three'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello33333333333'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token keyword">function</span> <span class="token function">test1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'asy begins'</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'asy---111111'</span><span class="token punctuation">)</span>
 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1'</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'asy---222222'</span><span class="token punctuation">)</span>
 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'asy ends'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token function">asy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gnrt</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">11111111</span><span class="token punctuation">)</span>
     
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">22222222</span><span class="token punctuation">)</span>
     
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">33333333</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">gnrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
è¾“å‡ºé¡ºåºå¦‚ä¸‹ï¼š
good morning 
hello begins 
asy begins
asy---111111
test1
1
11111111
2
22222222
3
33333333
ihello one
hello1111111111
async1
asy---222222
hello two
hello22222222222
asy ends
hello three
hello33333333333

*/</span></span></span></span></code></pre><div id="https://www.notion.so/05c7db08af8b446091cd253fa3ad1f83" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/350dadc0277f45dbae5d3060ac195ff1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; Notablog 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>